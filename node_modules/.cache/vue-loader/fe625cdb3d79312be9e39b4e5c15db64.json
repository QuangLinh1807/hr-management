{"remainingRequest":"/home/dlinh/Documents/hr-management/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dlinh/Documents/hr-management/src/components/CardSkillSet/SubCategory.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dlinh/Documents/hr-management/src/components/CardSkillSet/SubCategory.vue","mtime":1624240131087},{"path":"/home/dlinh/Documents/hr-management/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dlinh/Documents/hr-management/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/dlinh/Documents/hr-management/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dlinh/Documents/hr-management/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBJbmZvVGFibGUgZnJvbSAiLi9JbmZvVGFibGUudnVlIjsKaW1wb3J0IGFwaSBmcm9tICJAL2FwaS9hcGkiOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEluZm9UYWJsZSwKICB9LAogIHByb3BzOiB7CiAgICBzdWJDYXRlZ29yeTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgfSwKICB9LAogIGNvbXB1dGVkOiB7fSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNWaXNpYmxlOiB0cnVlLAogICAgICBpc0VkaXQ6IGZhbHNlLAogICAgICB1cGRhdGVTdWJDYXRlZ29yeTogewogICAgICAgIGxpc3REZXRhaWxDYXRlZ29yeTogW10sCiAgICAgIH0sCiAgICAgIGNsb25lU3ViQ2F0ZWdvcnk6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5zdWJDYXRlZ29yeSkpLAogICAgICBwYXJhbXNJZDogdGhpcy4kcm91dGUucGFyYW1zLmlkLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNldElzVmlzaWJsZSgpIHsKICAgICAgdGhpcy5pc1Zpc2libGUgPSAhdGhpcy5pc1Zpc2libGU7CiAgICB9LAogICAgZWRpdFN1YkNhdGVnb3J5KHVwZGF0ZWRTa2lsbCkgewogICAgICB0aGlzLmlzRWRpdCA9IHRydWU7CiAgICAgIC8vIHVwZGF0ZSB1cGRhdGVTdWJDYXRlZ29yeQogICAgICBjb25zdCB7CiAgICAgICAgaWQsCiAgICAgICAgbGlzdEVtcGxveWVlU2tpbGxzOiBbeyB5ZWFyLCBsZXZlbCB9XSwKICAgICAgfSA9IHVwZGF0ZWRTa2lsbDsKICAgICAgY29uc3QgZmluZEluZGV4ID0gdGhpcy51cGRhdGVTdWJDYXRlZ29yeS5saXN0RGV0YWlsQ2F0ZWdvcnkuZmluZEluZGV4KAogICAgICAgIChzdWIpID0+IHN1Yi5kZXRhaWxfY2F0ZWdvcmllc19pZCA9PT0gaWQKICAgICAgKTsKICAgICAgaWYgKGZpbmRJbmRleCA+IC0xKSB7CiAgICAgICAgdGhpcy51cGRhdGVTdWJDYXRlZ29yeS5saXN0RGV0YWlsQ2F0ZWdvcnkuc3BsaWNlKGZpbmRJbmRleCwgMSwgewogICAgICAgICAgZGV0YWlsX2NhdGVnb3JpZXNfaWQ6IGlkLAogICAgICAgICAgeWVhciwKICAgICAgICAgIGxldmVsLAogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudXBkYXRlU3ViQ2F0ZWdvcnkubGlzdERldGFpbENhdGVnb3J5LnB1c2goewogICAgICAgICAgZGV0YWlsX2NhdGVnb3JpZXNfaWQ6IGlkLAogICAgICAgICAgeWVhciwKICAgICAgICAgIGxldmVsLAogICAgICAgIH0pOwogICAgICB9CiAgICAgIC8vIHVwZGF0ZSBzdWJDYXRlZ29yeQogICAgICBjb25zdCB1cGRhdGVkRGV0YWlsU3ViID0KICAgICAgICB0aGlzLmNsb25lU3ViQ2F0ZWdvcnkubGlzdERldGFpbFN1YkNhdGVnb3JpZXMubWFwKChkZXRhaWxTdWIpID0+CiAgICAgICAgICBkZXRhaWxTdWIuaWQgPT09IHVwZGF0ZWRTa2lsbC5pZAogICAgICAgICAgICA/IHsgLi4uZGV0YWlsU3ViLCAuLi51cGRhdGVkU2tpbGwgfQogICAgICAgICAgICA6IGRldGFpbFN1YgogICAgICAgICk7CiAgICAgIHRoaXMuY2xvbmVTdWJDYXRlZ29yeSA9IHsKICAgICAgICAuLi50aGlzLmNsb25lU3ViQ2F0ZWdvcnksCiAgICAgICAgbGlzdERldGFpbFN1YkNhdGVnb3JpZXM6IHVwZGF0ZWREZXRhaWxTdWIsCiAgICAgIH07CiAgICB9LAogICAgYXN5bmMgc2F2ZVVwZGF0ZSgpIHsKICAgICAgLy8gdGhpcy4kc3RvcmUuY29tbWl0KCJvdmVydmlldy9TRVRfQ0hBTkdFIiwgdHJ1ZSk7CiAgICAgIGNvbnNvbGUubG9nKCJvdmVydmlldyIpOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaSgidXBkYXRlUHJvZmlsZVNraWxsU2V0IiwgewogICAgICAgICAgdXBkYXRlZERhdGE6IHRoaXMudXBkYXRlU3ViQ2F0ZWdvcnksCiAgICAgICAgICBhY2NvdW50SWQ6IHRoaXMucGFyYW1zSWQsCiAgICAgICAgfSk7CiAgICAgICAgaWYgKHJlcy5oYXNFcnJvcikgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJBbiBlcnJvciBvY2N1cnJlZC4iKTsKICAgICAgICB9CiAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goIm92ZXJ2aWV3L2dldFBlcnNvbmFsRnJvbUFwaSIsIHsKICAgICAgICAgIGFjY291bnRJZDogdGhpcy5wYXJhbXNJZCwKICAgICAgICB9KTsKICAgICAgICB0aGlzLmlzRWRpdCA9IGZhbHNlOwogICAgICAgIHRoaXMuJGVtaXQoInVwZGF0ZS1za2lsbHNldCIpOwogICAgICAgIHRoaXMudXBkYXRlU3ViQ2F0ZWdvcnkgPSB7CiAgICAgICAgICBsaXN0RGV0YWlsQ2F0ZWdvcnk6IFtdLAogICAgICAgIH07CiAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgIGdyb3VwOiAiZm9vIiwKICAgICAgICAgIHRpdGxlOiAiU3VjY2VzcyIsCiAgICAgICAgICB0ZXh0OiBgVXBkYXRlIHN1Y2Nlc3NmdWxsbHlgLAogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICBncm91cDogImZvbyIsCiAgICAgICAgICB0aXRsZTogImVycm9yIiwKICAgICAgICAgIHRleHQ6IGAke2Vycm9yfWAsCiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgY2FuY2VsVXBkYXRlKCkgewogICAgICAvLyB0aGlzLiRzdG9yZS5jb21taXQoIm92ZXJ2aWV3L1NFVF9DSEFOR0UiLCB0cnVlKTsKICAgICAgdGhpcy5pc0VkaXQgPSBmYWxzZTsKICAgICAgdGhpcy51cGRhdGVTdWJDYXRlZ29yeSA9IHsKICAgICAgICBpZDogdGhpcy5zdWJDYXRlZ29yeS5pZCwKICAgICAgICBsaXN0RGV0YWlsQ2F0ZWdvcnk6IFtdLAogICAgICB9OwogICAgICB0aGlzLmNsb25lU3ViQ2F0ZWdvcnkgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuc3ViQ2F0ZWdvcnkpKTsKICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgc3ViQ2F0ZWdvcnk6IHsKICAgICAgaGFuZGxlcih2YWwpIHsKICAgICAgICB0aGlzLmNsb25lU3ViQ2F0ZWdvcnkgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHZhbCkpOwogICAgICAgIHRoaXMuaXNFZGl0ID0gZmFsc2U7CiAgICAgICAgdGhpcy51cGRhdGVTdWJDYXRlZ29yeSA9IHsKICAgICAgICAgIGlkOiB0aGlzLnN1YkNhdGVnb3J5LmlkLAogICAgICAgICAgbGlzdERldGFpbENhdGVnb3J5OiBbXSwKICAgICAgICB9OwogICAgICB9LAogICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["SubCategory.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SubCategory.vue","sourceRoot":"src/components/CardSkillSet","sourcesContent":["<template>\n  <div>\n    <div class=\"sub-category\">\n      <h1 class=\"sub-category-title break-all\" @click.self=\"setIsVisible\">\n        {{ cloneSubCategory.name }}\n      </h1>\n      <div class=\"actions\" v-if=\"isEdit\">\n        <save-icon\n          size=\"1.5x\"\n          class=\"custom-class save\"\n          @click=\"saveUpdate\"\n        ></save-icon>\n        <x-icon\n          size=\"1.5x\"\n          class=\"custom-class cancel\"\n          @click=\"cancelUpdate\"\n        ></x-icon>\n      </div>\n    </div>\n    <div class=\"sub-category-table\" :class=\"{ 'h-0': !isVisible }\">\n      <p class=\"sub-category-desc\">\n        {{ cloneSubCategory.description }}\n      </p>\n      <InfoTable\n        :listDetailSubCategory=\"cloneSubCategory.listDetailSubCategories\"\n        @edit-detail=\"editSubCategory\"\n      ></InfoTable>\n    </div>\n  </div>\n</template>\n\n<script>\nimport InfoTable from \"./InfoTable.vue\";\nimport api from \"@/api/api\";\n\nexport default {\n  components: {\n    InfoTable,\n  },\n  props: {\n    subCategory: {\n      type: Object,\n      required: true,\n    },\n  },\n  computed: {},\n  data() {\n    return {\n      isVisible: true,\n      isEdit: false,\n      updateSubCategory: {\n        listDetailCategory: [],\n      },\n      cloneSubCategory: JSON.parse(JSON.stringify(this.subCategory)),\n      paramsId: this.$route.params.id,\n    };\n  },\n  methods: {\n    setIsVisible() {\n      this.isVisible = !this.isVisible;\n    },\n    editSubCategory(updatedSkill) {\n      this.isEdit = true;\n      // update updateSubCategory\n      const {\n        id,\n        listEmployeeSkills: [{ year, level }],\n      } = updatedSkill;\n      const findIndex = this.updateSubCategory.listDetailCategory.findIndex(\n        (sub) => sub.detail_categories_id === id\n      );\n      if (findIndex > -1) {\n        this.updateSubCategory.listDetailCategory.splice(findIndex, 1, {\n          detail_categories_id: id,\n          year,\n          level,\n        });\n      } else {\n        this.updateSubCategory.listDetailCategory.push({\n          detail_categories_id: id,\n          year,\n          level,\n        });\n      }\n      // update subCategory\n      const updatedDetailSub =\n        this.cloneSubCategory.listDetailSubCategories.map((detailSub) =>\n          detailSub.id === updatedSkill.id\n            ? { ...detailSub, ...updatedSkill }\n            : detailSub\n        );\n      this.cloneSubCategory = {\n        ...this.cloneSubCategory,\n        listDetailSubCategories: updatedDetailSub,\n      };\n    },\n    async saveUpdate() {\n      // this.$store.commit(\"overview/SET_CHANGE\", true);\n      console.log(\"overview\");\n      try {\n        const res = await api(\"updateProfileSkillSet\", {\n          updatedData: this.updateSubCategory,\n          accountId: this.paramsId,\n        });\n        if (res.hasError) {\n          throw new Error(\"An error occurred.\");\n        }\n        await this.$store.dispatch(\"overview/getPersonalFromApi\", {\n          accountId: this.paramsId,\n        });\n        this.isEdit = false;\n        this.$emit(\"update-skillset\");\n        this.updateSubCategory = {\n          listDetailCategory: [],\n        };\n        this.$notify({\n          group: \"foo\",\n          title: \"Success\",\n          text: `Update successfullly`,\n          type: \"success\",\n        });\n      } catch (error) {\n        this.$notify({\n          group: \"foo\",\n          title: \"error\",\n          text: `${error}`,\n          type: \"error\",\n        });\n      }\n    },\n    cancelUpdate() {\n      // this.$store.commit(\"overview/SET_CHANGE\", true);\n      this.isEdit = false;\n      this.updateSubCategory = {\n        id: this.subCategory.id,\n        listDetailCategory: [],\n      };\n      this.cloneSubCategory = JSON.parse(JSON.stringify(this.subCategory));\n    },\n  },\n  watch: {\n    subCategory: {\n      handler(val) {\n        this.cloneSubCategory = JSON.parse(JSON.stringify(val));\n        this.isEdit = false;\n        this.updateSubCategory = {\n          id: this.subCategory.id,\n          listDetailCategory: [],\n        };\n      },\n      immediate: true,\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.sub-category {\n  @apply flex items-center px-4 py-2 text-gray-700 border-gray-300 cursor-pointer hover:bg-gray-200 hover:text-gray-900;\n}\n\n.sub-category-title {\n  @apply flex-1 font-mono text-sm;\n}\n\n.sub-category-table {\n  @apply bg-gray-200 px-4 overflow-hidden;\n}\n\n.sub-category-desc {\n  @apply my-3 font-semibold leading-tight text-gray-800 text-base;\n}\n\n.actions {\n}\n.action p {\n  @apply p-2 border-none;\n}\n\n.list-sub-skill {\n  @apply w-full;\n}\n\n.custom-class {\n  @apply mx-1 cursor-pointer;\n}\n\n.save {\n  @apply text-green-500 hover:text-gray-500;\n}\n\n.cancel {\n  @apply text-red-500 hover:text-gray-500;\n}\n</style>\n"]}]}