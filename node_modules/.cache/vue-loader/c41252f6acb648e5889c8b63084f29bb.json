{"remainingRequest":"/home/dlinh/Documents/hr-management/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dlinh/Documents/hr-management/src/components/Timeline/PopupAddTimeline.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dlinh/Documents/hr-management/src/components/Timeline/PopupAddTimeline.vue","mtime":1623900937153},{"path":"/home/dlinh/Documents/hr-management/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dlinh/Documents/hr-management/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/dlinh/Documents/hr-management/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dlinh/Documents/hr-management/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBCYXNlSW5wdXQgZnJvbSAiLi4vLi4vY29tcG9uZW50cy9CYXNlSW5wdXQvQmFzZUlucHV0LnZ1ZSI7CmltcG9ydCBCYXNlVGV4dGFyZWEgZnJvbSAiLi4vLi4vY29tcG9uZW50cy9CYXNlVGV4dGFyZWEvQmFzZVRleHRhcmVhLnZ1ZSI7CmltcG9ydCBEYXRlUGlja2VyIGZyb20gInZ1ZTItZGF0ZXBpY2tlciI7CmltcG9ydCB7IFBlcmZlY3RTY3JvbGxiYXIgfSBmcm9tICJ2dWUyLXBlcmZlY3Qtc2Nyb2xsYmFyIjsKaW1wb3J0IHsgbWFwR2V0dGVycywgbWFwTXV0YXRpb25zIH0gZnJvbSAidnVleCI7CmltcG9ydCBhcGkgZnJvbSAiLi4vLi4vYXBpL2FwaSI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBEYXRlUGlja2VyLAogICAgQmFzZUlucHV0LAogICAgQmFzZVRleHRhcmVhLAogICAgUGVyZmVjdFNjcm9sbGJhciwKICB9LAogIG5hbWU6ICJQb3B1cFRpbWVsaW5lIiwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycygicG9wdXBBZGRUaW1lbGluZSIsIFsic2hvd0FkZFRpbWVsaW5lIiwgImFjY291bnRJZCJdKSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByYW5nZTogbmV3IERhdGUoKSwKICAgICAgc2hvd1BvcHVwVGltZWxpbmU6IGZhbHNlLAogICAgICBzdWJtaXR0ZWQ6IGZhbHNlLAogICAgICBhZGRUaW1lbGluZTogIkFkZCBUaW1lbGluZSIsCiAgICAgIGxpc3RUaW1lbGluZUZyb21BcGk6IFsKICAgICAgICB7CiAgICAgICAgICByYW5nZTogIiIsCiAgICAgICAgICB0aXRsZTogIiIsCiAgICAgICAgICBjb250ZW50OiAiIiwKICAgICAgICB9LAogICAgICBdLAogICAgICBsaXN0VGltZWxpbmU6IFtdLAogICAgICBmaWRsZERhdGU6IHsKICAgICAgICBuYW1lOiAiZGF0ZXBpY2tlciIsCiAgICAgICAgcnVsZXM6ICJyZXF1aXJlZCIsCiAgICAgIH0sCiAgICAgIGZpZWxkVGl0bGU6IHsKICAgICAgICBuYW1lOiAidGl0bGUiLAogICAgICAgIG1vZGVsOiAiIiwKICAgICAgICBydWxlczogInJlcXVpcmVkfG1pbjo0fG1heDo1MCIsCiAgICAgICAgdHlwZTogInRleHQiLAogICAgICB9LAogICAgICBmaWVsZENvbnRlbnQ6IHsKICAgICAgICBuYW1lOiAiY29udGVudCIsCiAgICAgICAgbW9kZWw6ICIiLAogICAgICAgIHJ1bGVzOiAicmVxdWlyZWR8bWluOjR8bWF4OjUxMiIsCiAgICAgIH0sCiAgICB9OwogIH0sCiAgcHJvcHM6IHsKICAgIGFkZFRpbWVsaW5lczogewogICAgICB0eXBlOiBGdW5jdGlvbiwKICAgICAgZGVmYXVsdDogKCkgPT4gMSwKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5iaW5kaW5nbGlzdFRpbWVsaW5lKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBNdXRhdGlvbnMoInBvcHVwQWRkVGltZWxpbmUiLCBbIlNFVF9TSE9XX0FERF9USU1FTElORSJdKSwKICAgIC4uLm1hcE11dGF0aW9ucygibG9hZGluZyIsIFsiU0VUX0xPQURJTkciXSksCiAgICBkaXNhYmxlZEJlZm9yZVRvZGF5KGRhdGUpIHsKICAgICAgcmV0dXJuIGRhdGUgPiBuZXcgRGF0ZSgpOwogICAgfSwKICAgIGFkZE1vcmVUaW1lbGluZSgpIHsKICAgICAgaWYgKHRoaXMubGlzdFRpbWVsaW5lLmxlbmd0aCA8IDUpIHsKICAgICAgICB0aGlzLmxpc3RUaW1lbGluZS5wdXNoKHsKICAgICAgICAgIHJhbmdlOiAiIiwKICAgICAgICAgIHRpdGxlOiAiIiwKICAgICAgICAgIGNvbnRlbnQ6ICIiLAogICAgICAgIH0pOwogICAgICAgIHRoaXMuc2Nyb2xsVG9FbmQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgZ3JvdXA6ICJmb28iLAogICAgICAgICAgdGl0bGU6ICJFcnJvciIsCiAgICAgICAgICB0ZXh0OiAiQ2Fubm90IEFkZCBUaW1lbGluZSwgeW91IGhhdmUgZW5vdWdoIDUgaXRlbXMiLAogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHJlbW92ZVRpbWVsaW5lKGlkdGltZSkgewogICAgICBpZiAodGhpcy5saXN0VGltZWxpbmUubGVuZ3RoID4gMSkgewogICAgICAgIHRoaXMubGlzdFRpbWVsaW5lLnNwbGljZShpZHRpbWUsIDEpOwogICAgICB9CiAgICB9LAogICAgY2xvc2VUaW1lbGluZSgpIHsKICAgICAgdGhpcy5TRVRfU0hPV19BRERfVElNRUxJTkUoZmFsc2UpOwogICAgICB0aGlzLmxpc3RUaW1lbGluZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5saXN0VGltZWxpbmVGcm9tQXBpKSk7CiAgICB9LAogICAgc2Nyb2xsVG9FbmQoKSB7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2NvbnRhaW5lciIpOwogICAgICAgIGNvbnRhaW5lci5zY3JvbGxUb3AgPSBjb250YWluZXIuc2Nyb2xsSGVpZ2h0OwogICAgICB9KTsKICAgIH0sCiAgICAvL2Zvcm1hdCBkYXRlCiAgICBmb3JtYXREYXRlVGltZShkYXRlKSB7CiAgICAgIHJldHVybiBtb21lbnQoZGF0ZSkuZm9ybWF0KCJERC9NTS9ZWVlZIik7CiAgICB9LAogICAgYXN5bmMgc3VibWl0Rm9ybSgpIHsKICAgICAgdGhpcy5hZGRUaW1lbGluZXModGhpcy5saXN0VGltZWxpbmUpOwogICAgICBsZXQgaW5zZXJ0VmFsdWVzID0gW107CiAgICAgIHRoaXMubGlzdFRpbWVsaW5lLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICBpbnNlcnRWYWx1ZXMucHVzaCh7CiAgICAgICAgICBjb250ZW50OiBpdGVtLmNvbnRlbnQsCiAgICAgICAgICBlbmREYXRlOiB0aGlzLmZvcm1hdERhdGVUaW1lKGl0ZW0ucmFuZ2VbMV0pLAogICAgICAgICAgc3RhcnREYXRlOiB0aGlzLmZvcm1hdERhdGVUaW1lKGl0ZW0ucmFuZ2VbMF0pLAogICAgICAgICAgdGl0bGU6IGl0ZW0udGl0bGUsCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhcGkoImFkZFRpbWVsaW5lQXBpIiwgewogICAgICAgIGxpc3RUaW1lbGluZXM6IGluc2VydFZhbHVlcywKICAgICAgICBhY2NvdW50SWQ6IHRoaXMuYWNjb3VudElkLAogICAgICB9KTsKICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy5TRVRfTE9BRElORyhmYWxzZSk7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJTRVRfRkxBR19DSEFOR0UiLCB0cnVlKTsKCiAgICAgICAgdGhpcy5TRVRfU0hPV19BRERfVElNRUxJTkUoZmFsc2UpOwogICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICBncm91cDogImZvbyIsCiAgICAgICAgICB0aXRsZTogIlN1Y2Nlc3MiLAogICAgICAgICAgdGV4dDogIlN1Y2Nlc3NmdWxseSBhZGRlZCB0aW1lbGluZSIsCiAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgdGhpcy5saXN0VGltZWxpbmUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMubGlzdFRpbWVsaW5lRnJvbUFwaSkpOwogICAgfSwKICAgIGJpbmRpbmdsaXN0VGltZWxpbmUoKSB7CiAgICAgIHRoaXMubGlzdFRpbWVsaW5lID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmxpc3RUaW1lbGluZUZyb21BcGkpKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["PopupAddTimeline.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PopupAddTimeline.vue","sourceRoot":"src/components/Timeline","sourcesContent":["<template>\n  <div>\n    <transition name=\"fadeIn\" appear>\n      <div\n        class=\"modal-overlay fixed\"\n        v-if=\"showAddTimeline\"\n        @click=\"closeTimeline()\"\n      ></div>\n    </transition>\n    <transition name=\"slide\" appear>\n      <div\n        class=\"detail-popup-timeline fixed bg-white rounded-lg p-8\"\n        v-if=\"showAddTimeline\"\n      >\n        <button class=\"absolute top-2 right-2\" @click=\"closeTimeline()\">\n          <xIcon />\n        </button>\n        <div class=\"title text-center text-base font-semibold mb-6\">\n          {{ addTimeline }}\n        </div>\n        <hr />\n        <ValidationObserver v-slot=\"{ handleSubmit }\">\n          <form @submit.prevent=\"handleSubmit(submitForm)\">\n            <PerfectScrollbar\n              class=\"form-timeline-area relative\"\n              id=\"container\"\n            >\n              <div\n                class=\"item-timeline my-4\"\n                v-for=\"(item, index) of listTimeline\"\n                :key=\"index\"\n              >\n                <button\n                  class=\"flex items-center mb-3 w-full justify-end\"\n                  @click.prevent=\"removeTimeline(index)\"\n                  v-show=\"index || (!index && listTimeline.length > 1)\"\n                >\n                  <xIcon class=\"w-5 h-5\" />\n                </button>\n                <div class=\"item-timeline flex\">\n                  <label class=\"mt-3\">Period:</label>\n                  <ValidationProvider\n                    rules=\"required\"\n                    v-slot=\"{ errors, failedRules }\"\n                    class=\"vali-date-timeline\"\n                  >\n                    <DatePicker\n                      v-model=\"item.range\"\n                      lang=\"en\"\n                      range\n                      type=\"month\"\n                      format=\"M/YYYY\"\n                      :disabled-date=\"disabledBeforeToday\"\n                      class=\"month-input mb-1\"\n                      :class=\"{ error: errors[0] }\"\n                    >\n                    </DatePicker>\n                    <div class=\"failed-rules h-3 mb-2\">\n                      {{\n                        failedRules.required ? \"The time field is required\" : \"\"\n                      }}\n                    </div>\n                  </ValidationProvider>\n                </div>\n                <div class=\"item-timeline mb-2 flex\">\n                  <label class=\"mt-3\">Title:</label>\n                  <BaseInput :inputField=\"fieldTitle\" v-model=\"item.title\" />\n                </div>\n                <div class=\"item-timeline w-full flex mb-2\">\n                  <label class=\"\">Content:</label>\n                  <BaseTextarea\n                    :textareaField=\"fieldContent\"\n                    v-model=\"item.content\"\n                  ></BaseTextarea>\n                </div>\n                <hr />\n              </div>\n            </PerfectScrollbar>\n            <button\n              class=\"flex items-center mb-4 mt-2\"\n              @click.prevent=\"addMoreTimeline()\"\n            >\n              <Plus-SquareIcon class=\"w-5 h-5 mr-2\"></Plus-SquareIcon>Add more\n              Timeline\n            </button>\n            <div class=\"flex justify-center\">\n              <div class=\"w-2/4 flex justify-between\">\n                <button type=\"submit\" class=\"btn-add\">Save</button>\n                <button @click=\"closeTimeline()\" class=\"btn-close\">\n                  Cancel\n                </button>\n              </div>\n            </div>\n          </form>\n        </ValidationObserver>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport BaseInput from \"../../components/BaseInput/BaseInput.vue\";\nimport BaseTextarea from \"../../components/BaseTextarea/BaseTextarea.vue\";\nimport DatePicker from \"vue2-datepicker\";\nimport { PerfectScrollbar } from \"vue2-perfect-scrollbar\";\nimport { mapGetters, mapMutations } from \"vuex\";\nimport api from \"../../api/api\";\nimport moment from \"moment\";\n\nexport default {\n  components: {\n    DatePicker,\n    BaseInput,\n    BaseTextarea,\n    PerfectScrollbar,\n  },\n  name: \"PopupTimeline\",\n  computed: {\n    ...mapGetters(\"popupAddTimeline\", [\"showAddTimeline\", \"accountId\"]),\n  },\n  data() {\n    return {\n      range: new Date(),\n      showPopupTimeline: false,\n      submitted: false,\n      addTimeline: \"Add Timeline\",\n      listTimelineFromApi: [\n        {\n          range: \"\",\n          title: \"\",\n          content: \"\",\n        },\n      ],\n      listTimeline: [],\n      fidldDate: {\n        name: \"datepicker\",\n        rules: \"required\",\n      },\n      fieldTitle: {\n        name: \"title\",\n        model: \"\",\n        rules: \"required|min:4|max:50\",\n        type: \"text\",\n      },\n      fieldContent: {\n        name: \"content\",\n        model: \"\",\n        rules: \"required|min:4|max:512\",\n      },\n    };\n  },\n  props: {\n    addTimelines: {\n      type: Function,\n      default: () => 1,\n    },\n  },\n  created() {\n    this.bindinglistTimeline();\n  },\n  methods: {\n    ...mapMutations(\"popupAddTimeline\", [\"SET_SHOW_ADD_TIMELINE\"]),\n    ...mapMutations(\"loading\", [\"SET_LOADING\"]),\n    disabledBeforeToday(date) {\n      return date > new Date();\n    },\n    addMoreTimeline() {\n      if (this.listTimeline.length < 5) {\n        this.listTimeline.push({\n          range: \"\",\n          title: \"\",\n          content: \"\",\n        });\n        this.scrollToEnd();\n      } else {\n        this.$notify({\n          group: \"foo\",\n          title: \"Error\",\n          text: \"Cannot Add Timeline, you have enough 5 items\",\n          type: \"error\",\n        });\n      }\n    },\n    removeTimeline(idtime) {\n      if (this.listTimeline.length > 1) {\n        this.listTimeline.splice(idtime, 1);\n      }\n    },\n    closeTimeline() {\n      this.SET_SHOW_ADD_TIMELINE(false);\n      this.listTimeline = JSON.parse(JSON.stringify(this.listTimelineFromApi));\n    },\n    scrollToEnd() {\n      this.$nextTick(() => {\n        var container = document.querySelector(\"#container\");\n        container.scrollTop = container.scrollHeight;\n      });\n    },\n    //format date\n    formatDateTime(date) {\n      return moment(date).format(\"DD/MM/YYYY\");\n    },\n    async submitForm() {\n      this.addTimelines(this.listTimeline);\n      let insertValues = [];\n      this.listTimeline.forEach((item) => {\n        insertValues.push({\n          content: item.content,\n          endDate: this.formatDateTime(item.range[1]),\n          startDate: this.formatDateTime(item.range[0]),\n          title: item.title,\n        });\n      });\n      const result = await api(\"addTimelineApi\", {\n        listTimelines: insertValues,\n        accountId: this.accountId,\n      });\n      if (result.success === true) {\n        this.SET_LOADING(false);\n        this.$store.commit(\"SET_FLAG_CHANGE\", true);\n\n        this.SET_SHOW_ADD_TIMELINE(false);\n        this.$notify({\n          group: \"foo\",\n          title: \"Success\",\n          text: \"Successfully added timeline\",\n          type: \"success\",\n        });\n      }\n      this.listTimeline = JSON.parse(JSON.stringify(this.listTimelineFromApi));\n    },\n    bindinglistTimeline() {\n      this.listTimeline = JSON.parse(JSON.stringify(this.listTimelineFromApi));\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\nbutton {\n  appearance: none;\n  outline: none;\n  border: none;\n}\n.modal-overlay {\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 22;\n  background-color: rgba(0, 0, 0, 0.3);\n}\n.detail-popup-timeline {\n  z-index: 200;\n  top: 30%;\n  left: 50%;\n  transform: translate(-50%, -30%);\n  width: 100%;\n  max-width: 600px;\n}\n.fadeIn-enter-active,\n.fadeIn-leave-active {\n  transition: opacity 0.5s;\n}\n.fadeIn-enter,\n.fadeIn-leave-to {\n  opacity: 0;\n}\n.slide-enter-active,\n.slide-leave-active {\n  transition: opacity 0.5s;\n}\n.slide-enter,\n.slide-leave-to {\n  opacity: 0;\n}\n.item-timeline label {\n  width: 70px;\n  float: left;\n}\n.item-timeline:last-child {\n  margin-bottom: 0;\n}\n.btn-add {\n  @apply bg-blue-600 text-white px-10 py-3 rounded-lg font-semibold mx-auto;\n  transition: 0.1s linear;\n}\n.btn-close {\n  @apply px-10 py-3 rounded-lg font-semibold mx-auto  focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500;\n  border: 1px solid #e2e8f0;\n}\n.btn-add:hover {\n  opacity: 0.8;\n}\n.form-timeline-area {\n  max-height: 600px;\n  width: 100%;\n  padding: 0 16px;\n}\n.vali-date-timeline {\n  width: calc(100% - 70px);\n  .month-input {\n    width: 100% !important;\n  }\n}\n.failed-rules {\n  color: #ed5d5d;\n}\n.mx-datepicker-range {\n  width: 100%;\n}\n</style>\n\n<style lang=\"scss\">\n.detail-popup-timeline {\n  input {\n    transform: none !important;\n  }\n}\n.month-input {\n  width: 100%;\n  .mx-input {\n    border: 1px solid #cccccc6b !important;\n    height: 46px !important;\n    border-radius: 8px !important;\n    padding-left: 20px;\n  }\n}\n.month-input.error .mx-input {\n  background-color: rgba(237, 93, 93, 0.08);\n  border-color: #ed5d5d !important;\n}\n*:focus {\n  outline: none !important;\n}\n</style>\n"]}]}