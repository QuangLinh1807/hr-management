{"remainingRequest":"/home/dlinh/Documents/hr-management/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dlinh/Documents/hr-management/src/components/Popup/PopupChangePassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dlinh/Documents/hr-management/src/components/Popup/PopupChangePassword.vue","mtime":1624240131091},{"path":"/home/dlinh/Documents/hr-management/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dlinh/Documents/hr-management/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/dlinh/Documents/hr-management/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dlinh/Documents/hr-management/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBCYXNlSW5wdXQgZnJvbSAiLi4vQmFzZUlucHV0L0Jhc2VJbnB1dC52dWUiOwppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBNdXRhdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IGFwaSBmcm9tICJAL2FwaS9hcGkiOwppbXBvcnQgeyBleHRlbmQgfSBmcm9tICJ2ZWUtdmFsaWRhdGUiOwoKZXh0ZW5kKCJwYXNzd29yZCIsIHsKICBwYXJhbXM6IFsidGFyZ2V0Il0sCiAgdmFsaWRhdGUodmFsdWUsIHsgdGFyZ2V0IH0pIHsKICAgIHJldHVybiB2YWx1ZSA9PT0gdGFyZ2V0OwogIH0sCiAgbWVzc2FnZTogIlBhc3N3b3JkIGNvbmZpcm1hdGlvbiBkb2VzIG5vdCBtYXRjaCIsCn0pOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQmFzZUlucHV0LAogIH0sCiAgbmFtZTogIlBvcHVwQ2hhbmdlUGFzc3dvcmQiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhZGRDaGFuZ2VQYXNzd29yZDogIkNoYW5nZSBQYXNzd29yZCIsCiAgICAgIGxpc3RGaWVsZHM6IFsKICAgICAgICB7CiAgICAgICAgICBpZDogMSwKICAgICAgICAgIGxhYmVsOiAiT2xkIFBhc3N3b3JkIiwKICAgICAgICAgIHR5cGU6ICJwYXNzd29yZCIsCiAgICAgICAgICBwbGFjZWhvbGRlcjogIk9sZCBQYXNzd29yZCIsCiAgICAgICAgICBrZXk6ICJvbGRQYXNzd29yZCIsCiAgICAgICAgICBuYW1lOiAiT2xkIFBhc3N3b3JkIiwKICAgICAgICAgIG1vZGVsOiAiIiwKICAgICAgICAgIHJ1bGVzOiAicmVxdWlyZWQiLAogICAgICAgICAgbW9kZTogImVhZ2VyIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGlkOiAyLAogICAgICAgICAgdmlkOiAiY29uZmlybWF0aW9uIiwKICAgICAgICAgIGxhYmVsOiAiTmV3IFBhc3N3b3JkIiwKICAgICAgICAgIHR5cGU6ICJwYXNzd29yZCIsCiAgICAgICAgICBwbGFjZWhvbGRlcjogIk5ldyBQYXNzd29yZCIsCiAgICAgICAgICBrZXk6ICJuZXdQYXNzd29yZCIsCiAgICAgICAgICBuYW1lOiAiTmV3IFBhc3N3b3JkIiwKICAgICAgICAgIG1vZGVsOiAiIiwKICAgICAgICAgIHJ1bGVzOiB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICByZWdleDoKICAgICAgICAgICAgICAvXig/PS4qWzAtOV0pKD89LipbYS16XSkoPz0uKltBLVpdKSg/PS4qWyFAIyYoKeKAk3t9OjssPy8qfiReKz08Pi5dKS57NiwzMn0kLywKICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBpZDogMywKICAgICAgICAgIGxhYmVsOiAiQ29uZmlybSBQYXNzd29yZCIsCiAgICAgICAgICB0eXBlOiAicGFzc3dvcmQiLAogICAgICAgICAgcGxhY2Vob2xkZXI6ICJDb25maXJtIFBhc3N3b3JkIiwKICAgICAgICAgIGtleTogImNvbmZpcm1QYXNzd29yZCIsCiAgICAgICAgICBuYW1lOiAiY29uZmlybSIsCiAgICAgICAgICBtb2RlbDogIiIsCiAgICAgICAgICBydWxlczogewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgY29uZmlybWVkOiAiY29uZmlybWF0aW9uIiwKICAgICAgICAgIH0sCiAgICAgICAgICBtb2RlOiAiZWFnZXIiLAogICAgICAgIH0sCiAgICAgIF0sCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoInBvcG9wdXBDaGFuZ2VQYXNzd29yZCIsIFsiaXNTaG93Il0pLAogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwTXV0YXRpb25zKCJwb3BvcHVwQ2hhbmdlUGFzc3dvcmQiLCBbIlNFVF9JU19TSE9XIl0pLAogICAgLi4ubWFwTXV0YXRpb25zKCJsb2FkaW5nIiwgWyJTRVRfTE9BRElORyJdKSwKICAgIGFzeW5jIHN1Ym1pdEZvcm0oKSB7CiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy5TRVRfTE9BRElORyh0cnVlKTsKICAgICAgICB0aGlzLmRhdGEgPSB0aGlzLmxpc3RGaWVsZHMucmVkdWNlKChvYmosIGl0ZW0pID0+IHsKICAgICAgICAgIG9ialtpdGVtLmtleV0gPSBpdGVtLm1vZGVsOwogICAgICAgICAgcmV0dXJuIG9iajsKICAgICAgICB9LCB7fSk7CiAgICAgICAgdGhpcy5TRVRfTE9BRElORyhmYWxzZSk7CiAgICAgICAgaWYgKCEodGhpcy5kYXRhLm5ld1Bhc3N3b3JkID09PSB0aGlzLmRhdGEuY29uZmlybVBhc3N3b3JkKSkgewogICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgZ3JvdXA6ICJlcnIiLAogICAgICAgICAgICB0aXRsZTogIkVycm9yIiwKICAgICAgICAgICAgdGV4dDogIk5ldyBwYXNzd29yZCBpcyBub3QgZHVwbGljYXRlIHdpdGggY29uZmlybSBwYXNzd29yZCIsCiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXBpKCJjaGFuZ2VQYXNzd29yZEFwaSIsIHRoaXMuZGF0YSk7CiAgICAgICAgdGhpcy5TRVRfTE9BRElORyhmYWxzZSk7CiAgICAgICAgaWYgKCFyZXMuc3VjY2VzcykgewogICAgICAgICAgdGhpcy5TRVRfSVNfU0hPVyh0cnVlKTsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXMuZGF0YS5yZXNwb25zZS5kYXRhLmVycm9yc1swXS5tZXNzYWdlKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5TRVRfTE9BRElORyhmYWxzZSk7CiAgICAgICAgdGhpcy5TRVRfSVNfU0hPVyhmYWxzZSk7CiAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgIGdyb3VwOiAiZm9vIiwKICAgICAgICAgIHRpdGxlOiAiU3VjY2VzcyIsCiAgICAgICAgICB0ZXh0OiBgU3VjY2Vzc2Z1bGx5IGNoYW5nZSBwYXNzd29yZGAsCiAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgIGdyb3VwOiAiZm9vIiwKICAgICAgICAgIHRpdGxlOiAiRXJyb3IiLAogICAgICAgICAgdGV4dDogZXJyb3IubWVzc2FnZSwKICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBjbG9zZUFkZCgpIHsKICAgICAgdGhpcy5TRVRfSVNfU0hPVyhmYWxzZSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["PopupChangePassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PopupChangePassword.vue","sourceRoot":"src/components/Popup","sourcesContent":["<template>\n  <div>\n    <transition name=\"fadeIn\" appear>\n      <div\n        class=\"modal-overlay absolute\"\n        v-if=\"isShow\"\n        @click=\"SET_IS_SHOW(false)\"\n      ></div>\n    </transition>\n    <transition name=\"slide\" appear>\n      <ValidationObserver v-slot=\"{ handleSubmit }\">\n        <form @submit.prevent=\"handleSubmit(submitForm)\">\n          <div class=\"detail-popup-password\" v-if=\"isShow\">\n            <div class=\"justify-center\">\n              <div class=\"popup-text-top\">\n                {{ addChangePassword }}\n              </div>\n            </div>\n            <hr />\n            <div class=\"sm:flex-row mt-4\">\n              <div\n                class=\"justify-center\"\n                v-for=\"item in listFields\"\n                :key=\"item.id\"\n              >\n                <div class=\"w-3/12\">\n                  <div class=\"font-medium label\">{{ item.label }}</div>\n                </div>\n                <BaseInput\n                  class=\"w-8/12\"\n                  :inputField=\"item\"\n                  v-model=\"item.model\"\n                ></BaseInput>\n              </div>\n            </div>\n            <div class=\"flex mb-4 justify-end\">\n              <div class=\"popup-bottom\">\n                <button\n                  @click.prevent=\"closeAdd\"\n                  type=\"button\"\n                  class=\"button-close\"\n                >\n                  Cancel\n                </button>\n                <button type=\"submit\" class=\"button-add\">Save</button>\n              </div>\n            </div>\n          </div>\n        </form>\n      </ValidationObserver>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport BaseInput from \"../BaseInput/BaseInput.vue\";\nimport { mapGetters, mapMutations } from \"vuex\";\nimport api from \"@/api/api\";\nimport { extend } from \"vee-validate\";\n\nextend(\"password\", {\n  params: [\"target\"],\n  validate(value, { target }) {\n    return value === target;\n  },\n  message: \"Password confirmation does not match\",\n});\nexport default {\n  components: {\n    BaseInput,\n  },\n  name: \"PopupChangePassword\",\n  data() {\n    return {\n      addChangePassword: \"Change Password\",\n      listFields: [\n        {\n          id: 1,\n          label: \"Old Password\",\n          type: \"password\",\n          placeholder: \"Old Password\",\n          key: \"oldPassword\",\n          name: \"Old Password\",\n          model: \"\",\n          rules: \"required\",\n          mode: \"eager\",\n        },\n        {\n          id: 2,\n          vid: \"confirmation\",\n          label: \"New Password\",\n          type: \"password\",\n          placeholder: \"New Password\",\n          key: \"newPassword\",\n          name: \"New Password\",\n          model: \"\",\n          rules: {\n            required: true,\n            regex:\n              /^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#&()â€“{}:;,?/*~$^+=<>.]).{6,32}$/,\n          },\n        },\n        {\n          id: 3,\n          label: \"Confirm Password\",\n          type: \"password\",\n          placeholder: \"Confirm Password\",\n          key: \"confirmPassword\",\n          name: \"confirm\",\n          model: \"\",\n          rules: {\n            required: true,\n            confirmed: \"confirmation\",\n          },\n          mode: \"eager\",\n        },\n      ],\n    };\n  },\n  computed: {\n    ...mapGetters(\"popopupChangePassword\", [\"isShow\"]),\n  },\n  methods: {\n    ...mapMutations(\"popopupChangePassword\", [\"SET_IS_SHOW\"]),\n    ...mapMutations(\"loading\", [\"SET_LOADING\"]),\n    async submitForm() {\n      try {\n        this.SET_LOADING(true);\n        this.data = this.listFields.reduce((obj, item) => {\n          obj[item.key] = item.model;\n          return obj;\n        }, {});\n        this.SET_LOADING(false);\n        if (!(this.data.newPassword === this.data.confirmPassword)) {\n          this.$notify({\n            group: \"err\",\n            title: \"Error\",\n            text: \"New password is not duplicate with confirm password\",\n            type: \"error\",\n          });\n        }\n        const res = await api(\"changePasswordApi\", this.data);\n        this.SET_LOADING(false);\n        if (!res.success) {\n          this.SET_IS_SHOW(true);\n          throw new Error(res.data.response.data.errors[0].message);\n        }\n        this.SET_LOADING(false);\n        this.SET_IS_SHOW(false);\n        this.$notify({\n          group: \"foo\",\n          title: \"Success\",\n          text: `Successfully change password`,\n          type: \"success\",\n        });\n      } catch (error) {\n        this.$notify({\n          group: \"foo\",\n          title: \"Error\",\n          text: error.message,\n          type: \"error\",\n        });\n      }\n    },\n    closeAdd() {\n      this.SET_IS_SHOW(false);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 22;\n  background-color: rgba(0, 0, 0, 0.3);\n}\n.detail-popup-password {\n  z-index: 100;\n  top: 30%;\n  left: 50%;\n  transform: translate(-50%, -30%);\n  width: 100%;\n  max-width: 600px;\n  padding: 0 40px;\n}\n.fadeIn-enter-active,\n.fadeIn-leave-active {\n  transition: opacity 0.5s;\n}\n.fadeIn-enter,\n.fadeIn-leave-to {\n  opacity: 0;\n}\n.slide-enter-active,\n.slide-leave-active {\n  transition: opacity 0.5s;\n}\n.slide-enter,\n.slide-leave-to {\n  opacity: 0;\n}\n\n.failed-rules {\n  color: #ed5d5d;\n}\n.detail-popup-password {\n  @apply fixed bg-white rounded-lg;\n\n  .popup-text-top {\n    @apply text-center text-lg font-semibold m-4;\n  }\n}\n.popup-bottom {\n  @apply pb-3 sm:flex sm:flex-row-reverse;\n  .button-close {\n    @apply mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm;\n  }\n\n  .button-add {\n    @apply w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm;\n  }\n}\n\n// *:focus {\n//   outline: none !important;\n// }\n\n.error::placeholder {\n  color: #ed5d5d;\n}\n\n.val-input {\n  .intro-x {\n    transform: initial !important;\n    opacity: 1 !important;\n  }\n}\n.label {\n  margin-bottom: -5px;\n}\n</style>\n"]}]}