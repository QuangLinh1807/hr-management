{"remainingRequest":"/home/dlinh/Documents/hr-management/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dlinh/Documents/hr-management/src/components/CardSkill/CardSkill.vue?vue&type=style&index=0&id=3d799613&lang=scss&scoped=true&","dependencies":[{"path":"/home/dlinh/Documents/hr-management/src/components/CardSkill/CardSkill.vue","mtime":1624240131087},{"path":"/home/dlinh/Documents/hr-management/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dlinh/Documents/hr-management/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/dlinh/Documents/hr-management/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/dlinh/Documents/hr-management/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dlinh/Documents/hr-management/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dlinh/Documents/hr-management/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jYXJkLXNraWxsIHsKICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjI2KTsKICBtYXgtd2lkdGg6IDE5cmVtOwogIG1pbi13aWR0aDogMTdyZW07CiAgbWF4LWhlaWdodDogMTlyZW07CiAgbWluLWhlaWdodDogMTdyZW07CiAgYmFja2dyb3VuZC1jb2xvcjogI2YyZjhmYzsKICBAYXBwbHkgcmVsYXRpdmUgcHgtNiBweS0zIHJvdW5kZWQteGwgbXQtNiBtbC00IG1iLTE0IHRleHQtY2VudGVyOwp9CgouaW1hZ2Utc2tpbGwgewogIHRvcDogLTQwJTsKICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAxMjAlKTsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXI7CiAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjsKICBAYXBwbHkgYWJzb2x1dGUgdy0xNiBoLTE2IHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1ncmF5LTQwMCBiZy1jZW50ZXIgYmctbm8tcmVwZWF0IGJnLWNvdmVyIGxlZnQtMS8yOwp9Cgouc2tpbGwtdGl0bGUgewogIEBhcHBseSBtYi02IG10LTggZm9udC1ib2xkIHRleHQtbGcgdHJ1bmNhdGUgdGV4dC1jZW50ZXI7Cn0KCi5hY3Rpb25zIHsKICBAYXBwbHkgYWJzb2x1dGUgdG9wLTQgcmlnaHQtMjsKfQoKLmFjdGlvbiBwIHsKICBAYXBwbHkgcC0yIGJvcmRlci1ub25lOwp9CgoubGlzdC1zdWItc2tpbGwgewogIEBhcHBseSB3LWZ1bGw7Cn0KCi5jdXN0b20tY2xhc3MgewogIEBhcHBseSBteC0yIGN1cnNvci1wb2ludGVyOwp9Cgouc2F2ZSB7CiAgQGFwcGx5IHRleHQtZ3JlZW4tNTAwIGhvdmVyOnRleHQtZ3JheS01MDA7Cn0KCi5jYW5jZWwgewogIEBhcHBseSB0ZXh0LXJlZC01MDAgaG92ZXI6dGV4dC1ncmF5LTUwMDsKfQo="},{"version":3,"sources":["CardSkill.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"CardSkill.vue","sourceRoot":"src/components/CardSkill","sourcesContent":["<template>\n  <div class=\"card-skill\">\n    <div class=\"image-skill\" :style=\"backgroundSkillSet\"></div>\n    <div class=\"skill-title\" v-tooltip.bottom=\"cloneSubCategory.name\" >\n      {{ cloneSubCategory.name }}\n    </div>\n    <div class=\"actions\" v-if=\"isEdit\">\n      <save-icon\n        size=\"1.5x\"\n        class=\"custom-class save\"\n        @click=\"saveUpdate\"\n      ></save-icon>\n      <x-icon\n        size=\"1.5x\"\n        class=\"custom-class cancel\"\n        @click=\"cancelUpdate\"\n      ></x-icon>\n    </div>\n    <div class=\"list-sub-skill\">\n      <table-skill\n        :listDetailSubCategory=\"cloneSubCategory.listDetailSubCategories\"\n        @edit-detail=\"editCardSkill\"\n      ></table-skill>\n    </div>\n  </div>\n</template>\n\n<script>\nimport TableSkill from \"./TableSkill.vue\";\nimport api from \"../../api/api\";\n\nexport default {\n  props: {\n    subCategory: {\n      type: Object,\n      required: true,\n    },\n  },\n  components: { TableSkill },\n  data() {\n    return {\n      isEdit: false,\n      accId: null,\n      updateSubCategory: {\n        listDetailCategory: [],\n      },\n      cloneSubCategory: JSON.parse(JSON.stringify(this.subCategory)),\n      paramsId: this.$route.params.id,\n    };\n  },\n  computed: {\n    backgroundSkillSet() {\n      return {\n        \"background-image\": `url(${this.cloneSubCategory.image})`,\n      };\n    },\n  },\n  watch: {\n    subCategory: {\n      handler(val) {\n        this.cloneSubCategory = JSON.parse(JSON.stringify(val));\n        this.isEdit = false;\n        this.updateSubCategory = {\n          id: this.subCategory.id,\n          listDetailCategory: [],\n        };\n      },\n      immediate: true,\n    },\n  },\n  methods: {\n    editCardSkill(updatedSkill) {\n      this.isEdit = true;\n      // update updateSubCategory\n      const {\n        id,\n        listEmployeeSkills: [{ year, level }],\n      } = updatedSkill;\n      const findIndex = this.updateSubCategory.listDetailCategory.findIndex(\n        (sub) => sub.detail_categories_id === id\n      );\n      if (findIndex > -1) {\n        this.updateSubCategory.listDetailCategory.splice(findIndex, 1, {\n          detail_categories_id: id,\n          year,\n          level,\n        });\n      } else {\n        this.updateSubCategory.listDetailCategory.push({\n          detail_categories_id: id,\n          year,\n          level,\n        });\n      }\n      // update subCategory\n      const updatedDetailSub =\n        this.cloneSubCategory.listDetailSubCategories.map((detailSub) =>\n          detailSub.id === updatedSkill.id\n            ? { ...detailSub, ...updatedSkill }\n            : detailSub\n        );\n      this.cloneSubCategory = {\n        ...this.cloneSubCategory,\n        listDetailSubCategories: updatedDetailSub,\n      };\n    },\n    cancelUpdate() {\n      this.isEdit = false;\n      this.updateSubCategory = {\n        id: this.subCategory.id,\n        listDetailCategory: [],\n      };\n      this.cloneSubCategory = JSON.parse(JSON.stringify(this.subCategory));\n    },\n    async saveUpdate() {\n      try {\n        const res = await api(\"updateProfileSkillSet\", {\n          updatedData: this.updateSubCategory,\n          accountId: this.paramsId,\n        });\n        if (!res.success) {\n          throw new Error(\"An error occurred.\");\n        }\n        await this.$store.dispatch(\"overview/getPersonalFromApi\", {\n          accountId: this.paramsId,\n        });\n        this.isEdit = false;\n        this.$emit(\"update-skillset\");\n        this.updateSubCategory = {\n          listDetailCategory: [],\n        };\n        this.$notify({\n          group: \"foo\",\n          title: \"Success\",\n          text: `Update successfullly`,\n          type: \"success\",\n        });\n      } catch (error) {\n        this.$notify({\n          group: \"foo\",\n          title: \"error\",\n          text: `${error}`,\n          type: \"error\",\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.card-skill {\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.26);\n  max-width: 19rem;\n  min-width: 17rem;\n  max-height: 19rem;\n  min-height: 17rem;\n  background-color: #f2f8fc;\n  @apply relative px-6 py-3 rounded-xl mt-6 ml-4 mb-14 text-center;\n}\n\n.image-skill {\n  top: -40%;\n  transform: translate(-50%, 120%);\n  background-position: center;\n  background-size: cover;\n  @apply absolute w-16 h-16 rounded-lg border border-gray-400 bg-center bg-no-repeat bg-cover left-1/2;\n}\n\n.skill-title {\n  @apply mb-6 mt-8 font-bold text-lg truncate text-center;\n}\n\n.actions {\n  @apply absolute top-4 right-2;\n}\n\n.action p {\n  @apply p-2 border-none;\n}\n\n.list-sub-skill {\n  @apply w-full;\n}\n\n.custom-class {\n  @apply mx-2 cursor-pointer;\n}\n\n.save {\n  @apply text-green-500 hover:text-gray-500;\n}\n\n.cancel {\n  @apply text-red-500 hover:text-gray-500;\n}\n</style>\n"]}]}