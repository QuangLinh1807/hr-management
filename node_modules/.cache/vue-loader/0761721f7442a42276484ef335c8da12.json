{"remainingRequest":"/home/dlinh/Documents/hr-management/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dlinh/Documents/hr-management/src/components/Popup/PopupAddCertificate.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dlinh/Documents/hr-management/src/components/Popup/PopupAddCertificate.vue","mtime":1624240131087},{"path":"/home/dlinh/Documents/hr-management/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dlinh/Documents/hr-management/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/dlinh/Documents/hr-management/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dlinh/Documents/hr-management/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBEYXRlUGlja2VyIGZyb20gInZ1ZTItZGF0ZXBpY2tlciI7CmltcG9ydCBCYXNlSW5wdXQgZnJvbSAiLi4vQmFzZUlucHV0L0Jhc2VJbnB1dC52dWUiOwppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBNdXRhdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IGFwaSBmcm9tICJAL2FwaS9hcGkiOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIERhdGVQaWNrZXIsCiAgICBCYXNlSW5wdXQsCiAgfSwKICBuYW1lOiAiUG9wdXBBZGREZWdyZWVzIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWRkRGVncmVlczogIkFkZCBtb3JlIERlZ3JlZXMgYW5kIENlcnRpZmljYXRlcyIsCiAgICAgIGRhdGE6IG51bGwsCiAgICAgIGFjY0lkOiBudWxsLAogICAgICBsaXN0RGVncmVlczogWwogICAgICAgIHsKICAgICAgICAgIGlkOiAiIiwKICAgICAgICAgIHRpdGxlOiAiIiwKICAgICAgICAgIGRhdGU6IFtdLAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIGxpc3RTdGFydERlZ3JlZXM6IFsKICAgICAgICB7CiAgICAgICAgICBpZDogIiIsCiAgICAgICAgICB0aXRsZTogIiIsCiAgICAgICAgICBkZXNjcmlwdGlvbjogIiIsCiAgICAgICAgICBkYXRlOiBbXSwKICAgICAgICB9LAogICAgICBdLAogICAgICBmb3JtSW5wdXQ6IHsKICAgICAgICB0aXRsZTogIlRpdGxlIiwKICAgICAgICBuYW1lOiAidGl0bGUiLAogICAgICAgIG1vZGVsOiAiIiwKICAgICAgICBydWxlczogInJlcXVpcmVkIiwKICAgICAgICB0eXBlOiAidGV4dCIsCiAgICAgICAgcGxhY2Vob2xkZXI6ICJUaXRsZSIsCiAgICAgIH0sCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoImNlcnRpZmljYXRlIiwgWyJpc1Nob3dBZGQiXSksCiAgICAuLi5tYXBHZXR0ZXJzKCJjZXJ0aWZpY2F0ZSIsIFsicmVuZGVyTGlzdEZpZWxkIl0pLAogIH0sCiAgd2F0Y2g6IHsKICAgICRyb3V0ZTogewogICAgICBoYW5kbGVyOiBhc3luYyBmdW5jdGlvbiAodG8pIHsKICAgICAgICB0aGlzLmFjY0lkID0gdG8ucGFyYW1zLmlkOwogICAgICB9LAogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcE11dGF0aW9ucygiY2VydGlmaWNhdGUiLCBbIlNFVF9JU19TSE9XX0FERCJdKSwKICAgIC4uLm1hcE11dGF0aW9ucygibG9hZGluZyIsIFsiU0VUX0xPQURJTkciXSksCiAgICBhZGREZWdyZWVzQ2VydGlmaWNhdGVzKCkgewogICAgICBpZiAodGhpcy5saXN0RGVncmVlcy5sZW5ndGggPCA1KSB7CiAgICAgICAgdGhpcy5saXN0RGVncmVlcy5wdXNoKHsKICAgICAgICAgIGlkOiAiIiwKICAgICAgICAgIHRpdGxlOiAiIiwKICAgICAgICAgIGRhdGU6IFtdLAogICAgICAgIH0pOwogICAgICAgIHRoaXMuc2Nyb2xsVG9FbmQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgZ3JvdXA6ICJlcnIiLAogICAgICAgICAgdGl0bGU6ICJFcnJvciIsCiAgICAgICAgICB0ZXh0OiAiQ2Fubm90IEFkZCBjZXJ0aWZpY2F0ZSBhbmQgQ2FyZWVyLCB5b3UgaGF2ZSBlbm91Z2ggNSBpdGVtcyIsCiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgZGVsZXRlRmllbGQoZXZlbnQpIHsKICAgICAgaWYgKHRoaXMubGlzdERlZ3JlZXMubGVuZ3RoID4gMSkgewogICAgICAgIHRoaXMubGlzdERlZ3JlZXMuc3BsaWNlKGV2ZW50LCAxKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgZ3JvdXA6ICJlcnIiLAogICAgICAgICAgdGl0bGU6ICJFcnJvciIsCiAgICAgICAgICB0ZXh0OiAiSXRlbSBjYW5ub3QgYmUgZGVsZXRlZCIsCiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgc3VibWl0Rm9ybSgpIHsKICAgICAgYXdhaXQgdGhpcy5wb3N0Q2VydGlmaWNhdGVBcGkoKTsKICAgIH0sCiAgICBjbG9zZUFkZCgpIHsKICAgICAgdGhpcy5saXN0RGVncmVlcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5saXN0U3RhcnREZWdyZWVzKSk7CiAgICAgIHRoaXMuU0VUX0lTX1NIT1dfQUREKGZhbHNlKTsKICAgIH0sCiAgICBzY3JvbGxUb0VuZCgpIHsKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCIjY29udGFpbmVyIik7CiAgICAgICAgY29udGFpbmVyLnNjcm9sbFRvcCA9IGNvbnRhaW5lci5zY3JvbGxIZWlnaHQ7CiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIHBvc3RDZXJ0aWZpY2F0ZUFwaSgpIHsKICAgICAgdHJ5IHsKICAgICAgICB0aGlzLlNFVF9MT0FESU5HKHRydWUpOwogICAgICAgIGNvbnN0IGFkZERhdGEgPSB0aGlzLmxpc3REZWdyZWVzLm1hcCgoaXRlbSkgPT4gewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbmFtZTogaXRlbS50aXRsZSwKICAgICAgICAgICAgc3RhcnREYXRlOiBgMDEvMDEvJHtpdGVtLmRhdGVbMF19YCwKICAgICAgICAgICAgZW5kRGF0ZTogYDAxLzAxLyR7aXRlbS5kYXRlWzFdfWAsCiAgICAgICAgICB9OwogICAgICAgIH0pOwogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaSgicG9zdENlcnRpZmljYXRlQXBpIiwgewogICAgICAgICAgZGF0YTogYWRkRGF0YSwKICAgICAgICAgIGFjY291bnRJZDogdGhpcy5hY2NJZCwKICAgICAgICB9KTsKICAgICAgICB0aGlzLlNFVF9MT0FESU5HKGZhbHNlKTsKICAgICAgICBpZiAoIXJlcy5zdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLlNFVF9JU19TSE9XX0FERCh0cnVlKTsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXMuZGF0YS5yZXNwb25zZS5kYXRhLmVycm9yc1swXS5tZXNzYWdlKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5TRVRfTE9BRElORyhmYWxzZSk7CiAgICAgICAgdGhpcy5TRVRfSVNfU0hPV19BREQoZmFsc2UpOwogICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJjZXJ0aWZpY2F0ZS9nZXRDZXJ0aWZpY2F0ZUFwaSIsIHsKICAgICAgICAgIGFjY291bnRJZDogdGhpcy5hY2NJZCwKICAgICAgICB9KTsKICAgICAgICB0aGlzLmxpc3REZWdyZWVzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmxpc3RTdGFydERlZ3JlZXMpKTsKICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgZ3JvdXA6ICJmb28iLAogICAgICAgICAgdGl0bGU6ICJzdWNjZXNzIiwKICAgICAgICAgIHRleHQ6ICJTdWNjZXNzZnVsbHkgYWRkIENlcnRpZmljYXRlIiwKICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICB9KTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgZ3JvdXA6ICJmb28iLAogICAgICAgICAgdGl0bGU6ICJFcnJvciIsCiAgICAgICAgICB0ZXh0OiBlcnJvci5tZXNzYWdlLAogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["PopupAddCertificate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0FA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PopupAddCertificate.vue","sourceRoot":"src/components/Popup","sourcesContent":["<template>\n  <div>\n    <transition name=\"fadeIn\" appear>\n      <div\n        class=\"modal-overlay absolute\"\n        @click=\"SET_IS_SHOW_ADD(false)\"\n        v-if=\"isShowAdd\"\n      ></div>\n    </transition>\n    <transition name=\"slide\" appear>\n      <ValidationObserver v-slot=\"{ handleSubmit }\">\n        <form @submit.prevent=\"handleSubmit(submitForm)\">\n          <div\n            class=\"detail-popup-certificate fixed bg-white rounded-lg\"\n            v-if=\"isShowAdd\"\n          >\n            <div class=\"justify-center\">\n              <div class=\"text-center text-lg font-semibold m-4\">\n                {{ addDegrees }}\n              </div>\n            </div>\n            <hr />\n            <PerfectScrollbar class=\"p-2 pt-5 h-60\" id=\"container\">\n              <div\n                class=\"sm:flex-row pb-3\"\n                v-for=\"(item, index) of listDegrees\"\n                :key=\"index\"\n              >\n                <div class=\"flex mr-auto pl-4 justify-between withdInput\">\n                  <BaseInput\n                    :inputField=\"formInput\"\n                    v-model=\"item.title\"\n                  ></BaseInput>\n                  <ValidationProvider\n                    rules=\"required\"\n                    v-slot=\"{ errors, classes, failedRules }\"\n                    class=\"w-1/4 space-x-4 ml-4 mt-3\"\n                  >\n                    <DatePicker\n                      class=\"text-center year-input\"\n                      format=\"YYYY\"\n                      value-type=\"YYYY\"\n                      lang=\"en\"\n                      name=\"date\"\n                      type=\"year\"\n                      v-model=\"item.date\"\n                      range\n                      :clearable=\"false\"\n                      :class=\"{ error: errors[0] }\"\n                    ></DatePicker>\n                    <div class=\"mt-1 errDate\" :class=\"classes\">\n                      {{\n                        failedRules.required ? \"The year field is required\" : \"\"\n                      }}\n                    </div>\n                  </ValidationProvider>\n                  <button\n                    class=\"focus:outline-none h-10 ml-2 mt-3\"\n                    @click.prevent=\"deleteField(item.id)\"\n                  >\n                    <XIcon class=\"text-gray-600 focus:outline-none\" />\n                  </button>\n                </div>\n              </div>\n            </PerfectScrollbar>\n            <div class=\"flex m-4 justify-between\">\n              <button\n                class=\"flex items-center mb-4 mt-2 ml-2 hover:text-primary-1\"\n                @click.prevent=\"addDegreesCertificates()\"\n              >\n                <Plus-SquareIcon class=\"w-5 h-5 mr-2\"></Plus-SquareIcon>Add\n              </button>\n              <div class=\"popup-bottom\">\n                <button\n                  @click.prevent=\"closeAdd\"\n                  type=\"button\"\n                  class=\"button-close\"\n                >\n                  Cancel\n                </button>\n                <button type=\"submit\" class=\"button-add\">Save</button>\n              </div>\n            </div>\n          </div>\n        </form>\n      </ValidationObserver>\n    </transition>\n  </div>\n</template>\n<script>\nimport DatePicker from \"vue2-datepicker\";\nimport BaseInput from \"../BaseInput/BaseInput.vue\";\nimport { mapGetters, mapMutations } from \"vuex\";\nimport api from \"@/api/api\";\n\nexport default {\n  components: {\n    DatePicker,\n    BaseInput,\n  },\n  name: \"PopupAddDegrees\",\n  data() {\n    return {\n      addDegrees: \"Add more Degrees and Certificates\",\n      data: null,\n      accId: null,\n      listDegrees: [\n        {\n          id: \"\",\n          title: \"\",\n          date: [],\n        },\n      ],\n      listStartDegrees: [\n        {\n          id: \"\",\n          title: \"\",\n          description: \"\",\n          date: [],\n        },\n      ],\n      formInput: {\n        title: \"Title\",\n        name: \"title\",\n        model: \"\",\n        rules: \"required\",\n        type: \"text\",\n        placeholder: \"Title\",\n      },\n    };\n  },\n  computed: {\n    ...mapGetters(\"certificate\", [\"isShowAdd\"]),\n    ...mapGetters(\"certificate\", [\"renderListField\"]),\n  },\n  watch: {\n    $route: {\n      handler: async function (to) {\n        this.accId = to.params.id;\n      },\n    },\n  },\n  methods: {\n    ...mapMutations(\"certificate\", [\"SET_IS_SHOW_ADD\"]),\n    ...mapMutations(\"loading\", [\"SET_LOADING\"]),\n    addDegreesCertificates() {\n      if (this.listDegrees.length < 5) {\n        this.listDegrees.push({\n          id: \"\",\n          title: \"\",\n          date: [],\n        });\n        this.scrollToEnd();\n      } else {\n        this.$notify({\n          group: \"err\",\n          title: \"Error\",\n          text: \"Cannot Add certificate and Career, you have enough 5 items\",\n          type: \"error\",\n        });\n      }\n    },\n    deleteField(event) {\n      if (this.listDegrees.length > 1) {\n        this.listDegrees.splice(event, 1);\n      } else {\n        this.$notify({\n          group: \"err\",\n          title: \"Error\",\n          text: \"Item cannot be deleted\",\n          type: \"error\",\n        });\n      }\n    },\n    async submitForm() {\n      await this.postCertificateApi();\n    },\n    closeAdd() {\n      this.listDegrees = JSON.parse(JSON.stringify(this.listStartDegrees));\n      this.SET_IS_SHOW_ADD(false);\n    },\n    scrollToEnd() {\n      this.$nextTick(() => {\n        var container = this.$el.querySelector(\"#container\");\n        container.scrollTop = container.scrollHeight;\n      });\n    },\n    async postCertificateApi() {\n      try {\n        this.SET_LOADING(true);\n        const addData = this.listDegrees.map((item) => {\n          return {\n            name: item.title,\n            startDate: `01/01/${item.date[0]}`,\n            endDate: `01/01/${item.date[1]}`,\n          };\n        });\n        const res = await api(\"postCertificateApi\", {\n          data: addData,\n          accountId: this.accId,\n        });\n        this.SET_LOADING(false);\n        if (!res.success) {\n          this.SET_IS_SHOW_ADD(true);\n          throw new Error(res.data.response.data.errors[0].message);\n        }\n        this.SET_LOADING(false);\n        this.SET_IS_SHOW_ADD(false);\n        await this.$store.dispatch(\"certificate/getCertificateApi\", {\n          accountId: this.accId,\n        });\n        this.listDegrees = JSON.parse(JSON.stringify(this.listStartDegrees));\n        this.$notify({\n          group: \"foo\",\n          title: \"success\",\n          text: \"Successfully add Certificate\",\n          type: \"success\",\n        });\n      } catch (error) {\n        this.$notify({\n          group: \"foo\",\n          title: \"Error\",\n          text: error.message,\n          type: \"error\",\n        });\n      }\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\nbutton {\n  appearance: none;\n  outline: none;\n  border: none;\n}\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 22;\n  background-color: rgba(0, 0, 0, 0.3);\n}\n.detail-popup-certificate {\n  z-index: 100;\n  top: 30%;\n  left: 50%;\n  transform: translate(-50%, -30%);\n  width: 100%;\n  max-width: 600px;\n}\n.fadeIn-enter-active,\n.fadeIn-leave-active {\n  transition: opacity 0.5s;\n}\n.fadeIn-enter,\n.fadeIn-leave-to {\n  opacity: 0;\n}\n.slide-enter-active,\n.slide-leave-active {\n  transition: opacity 0.5s;\n}\n.slide-enter,\n.slide-leave-to {\n  opacity: 0;\n}\n\n.btn-add {\n  @apply bg-primary-5 px-10 py-3 rounded-lg font-semibold flex mx-auto mr-2 text-white;\n  transition: 0.1s linear;\n}\n.btn-add:hover {\n  opacity: 0.8;\n}\n\n.failed-rules {\n  color: #ed5d5d;\n}\n.popup-bottom {\n  @apply px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse;\n  .button-close {\n    @apply mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm;\n  }\n  .button-add {\n    @apply w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm;\n  }\n}\n</style>\n\n<style lang=\"scss\">\n.month-input {\n  width: 100%;\n  .mx-input {\n    border: 1px solid #cccccc6b !important;\n    height: 46px !important;\n    border-radius: 8px !important;\n    padding-left: 20px;\n  }\n}\n.month-input.error .mx-input {\n  background-color: rgba(237, 93, 93, 0.08);\n  border-color: #ed5d5d !important;\n}\n*:focus {\n  outline: none !important;\n}\n\n#container {\n  max-height: 350px;\n  overflow-y: scroll;\n}\n.error {\n  border-color: #ed5d5d;\n  background-color: rgba($color: #ed5d5d, $alpha: 0.08);\n}\n.error::placeholder {\n  color: #ed5d5d;\n}\n.mx-datepicker-range {\n  width: 140px !important;\n}\n.errDate {\n  width: max-content !important;\n  margin-left: 0px !important;\n  margin-top: 50px !important;\n  margin-bottom: 10px !important;\n  color: #ed5d5d;\n}\n.year-input {\n  width: 100%;\n  height: 40px !important;\n  margin-left: 1.2rem;\n  float: right;\n  margin-bottom: 5px;\n  .mx-input {\n    border: 1px solid #cccccc6b !important;\n    height: 46px !important;\n    border-radius: 5px !important;\n    padding-left: 20px;\n  }\n}\n// .year-input.error input {\n//   border-color: #ed5d5d;\n//   background-color: rgba($color: #ed5d5d, $alpha: 0.08);\n// }\n.year-input.error .mx-input {\n  border-color: #ed5d5d !important;\n  background-color: rgba($color: #ed5d5d, $alpha: 0.08);\n}\n.val-input {\n  .intro-x {\n    transform: initial !important;\n    opacity: 1 !important;\n  }\n}\n</style>\n"]}]}