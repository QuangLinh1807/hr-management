{"remainingRequest":"/home/dlinh/Documents/hr-management/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dlinh/Documents/hr-management/src/components/ManagementSkillset/ModalManagementSkillset.vue?vue&type=style&index=1&lang=css&","dependencies":[{"path":"/home/dlinh/Documents/hr-management/src/components/ManagementSkillset/ModalManagementSkillset.vue","mtime":1624240131087},{"path":"/home/dlinh/Documents/hr-management/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dlinh/Documents/hr-management/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/dlinh/Documents/hr-management/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/dlinh/Documents/hr-management/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dlinh/Documents/hr-management/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoucHJldmlldy1jb250YWluZXIgewogIHdpZHRoOiAxMi41cmVtICFpbXBvcnRhbnQ7CiAgaGVpZ2h0OiAxMi41cmVtICFpbXBvcnRhbnQ7CiAgbWF4LXdpZHRoOiAxMi41cmVtICFpbXBvcnRhbnQ7CiAgbWF4LWhlaWdodDogMTIuNXJlbSAhaW1wb3J0YW50Owp9Ci5waWN0dXJlLXByZXZpZXcgewogIHdpZHRoOiAxMi41cmVtICFpbXBvcnRhbnQ7CiAgaGVpZ2h0OiAxMi41cmVtICFpbXBvcnRhbnQ7Cn0KLnBpY3R1cmUtaW5uZXIgewogIHRvcDogLTEyLjVyZW0gIWltcG9ydGFudDsKfQo="},{"version":3,"sources":["ModalManagementSkillset.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ModalManagementSkillset.vue","sourceRoot":"src/components/ManagementSkillset","sourcesContent":["<template>\n  <div>\n    <div class=\"overlay\" @click=\"actionCloseModal\"></div>\n    <div class=\"box-modal\">\n      <div class=\"flex justify-end\">\n        <x-circle-icon\n          size=\"2x\"\n          class=\"exit-icon\"\n          @click=\"actionCloseModal\"\n        ></x-circle-icon>\n      </div>\n      <div class=\"mb-2 text-center\">\n        <h3 class=\"title-form\">\n          {{ listTitleForm[getTypeModal].title }}\n        </h3>\n      </div>\n      <ValidationObserver v-slot=\"{ handleSubmit }\">\n        <form @submit.prevent=\"handleSubmit(submitForm)\">\n          <div v-if=\"hasFileInput\" class=\"relative\">\n            <img\n              :src=\"formGroup.image\"\n              alt=\"\"\n              class=\"image-preview-form\"\n              v-if=\"getShowImagePreview\"\n            />\n            <PictureInput\n              ref=\"pictureInput\"\n              @change=\"onChange\"\n              width=\"400\"\n              height=\"600\"\n              accept=\"image/jpeg,image/png,image/jpg\"\n              size=\"4\"\n              :hideChangeButton=\"true\"\n              :customStrings=\"{\n                drag: 'Drag or pick a image',\n              }\"\n              :style=\"getOpacityImage\"\n            >\n            </PictureInput>\n          </div>\n          <div class=\"mt-3 w-5/6 flex flex-col\">\n            <label class=\"ml-8 mb-2 font-medium\">Title</label>\n            <ValidationProvider\n              rules=\"required|min:1|max:255\"\n              name=\"title\"\n              v-slot=\"{ errors }\"\n            >\n              <input\n                class=\"form-control ml-8\"\n                type=\"text\"\n                v-model.trim=\"formGroup.name\"\n                name=\"title\"\n                :class=\"[errors[0] ? 'error' : '']\"\n              />\n              <div class=\"text-error\">\n                {{ errors[0] }}\n              </div>\n            </ValidationProvider>\n          </div>\n          <div class=\"mt-3 w-5/6 flex flex-col\">\n            <label class=\"ml-8 mb-2 font-medium\">Description</label>\n            <ValidationProvider\n              rules=\"min:1|max:255\"\n              name=\"description\"\n              v-slot=\"{ errors }\"\n            >\n              <input\n                class=\"form-control ml-8\"\n                type=\"text\"\n                v-model=\"formGroup.description\"\n                :class=\"[errors[0] ? 'error' : '']\"\n              />\n            </ValidationProvider>\n          </div>\n          <div\n            class=\"mt-3 w-5/6 flex justify-center relative\"\n            v-if=\"\n              (getTypeModal === listType.TYPE_CATEGORY) |\n                (getTypeModal === listType.TYPE_EDIT_CATEGORY)\n            \"\n          >\n            <label class=\"ml-8 mb-2 font-medium mr-4\">\n              Select color title</label\n            >\n            <div\n              class=\"box-color\"\n              :style=\"{ backgroundColor: formGroup.color }\"\n              @click=\"isColor = true\"\n            ></div>\n            <div v-if=\"isColor\" class=\"container-color\">\n              <div class=\"flex justify-end\">\n                <x-circle-icon\n                  size=\"1.3x\"\n                  class=\"m-1 cursor-pointer\"\n                  @click=\"isColor = false\"\n                ></x-circle-icon>\n              </div>\n              <div class=\"color-container\">\n                <div\n                  v-for=\"(item, index) of listColor\"\n                  :key=\"index\"\n                  class=\"box-color fix-color\"\n                  :style=\"{ backgroundColor: item }\"\n                  @click=\"selectedColor(item)\"\n                ></div>\n              </div>\n            </div>\n          </div>\n          <div class=\"mt-4 flex justify-center\">\n            <button class=\"btn btn-primary btn-submit\" type=\"submit\">\n              {{ listTitleForm[getTypeModal].btn }}\n            </button>\n          </div>\n        </form>\n      </ValidationObserver>\n    </div>\n  </div>\n</template>\n\n<script>\nimport api from \"../../api/api\";\nimport PictureInput from \"vue-picture-input\";\nimport { mapGetters, mapMutations } from \"vuex\";\nimport { LIST_TYPE_MODAL } from \"../../constants/typeModal\";\nimport { LIST_COLOR } from \"../../constants/listColor\";\n\nexport default {\n  components: {\n    PictureInput,\n  },\n  data() {\n    return {\n      isColor: false,\n      formGroup: {\n        name: null,\n        description: null,\n        image: null,\n        color: \"#007BC3\",\n      },\n      listColor: LIST_COLOR,\n      paramsRouter: this.$route.params.id,\n      listType: LIST_TYPE_MODAL,\n      listTitleForm: {\n        category: {\n          title: \"Add Category\",\n          btn: \"Add\",\n        },\n        editCategory: {\n          title: \"Edit Category\",\n          btn: \"Save\",\n        },\n        subCategory: {\n          title: \"Add Subcategory\",\n          btn: \"Add\",\n        },\n        editSubCategory: {\n          title: \"Edit Subcategory\",\n          btn: \"Save\",\n        },\n        subDetailCategory: {\n          title: \"Add Detail Subcategory\",\n          btn: \"Add\",\n        },\n        editSubDetailCategory: {\n          title: \"Edit Detail Subcategory\",\n          btn: \"Save\",\n        },\n      },\n    };\n  },\n  methods: {\n    ...mapMutations(\"management\", [\"toggleCallApi\", \"closeModal\"]),\n    onChange() {\n      if (this.$refs.pictureInput.file) {\n        this.formGroup.image = this.$refs.pictureInput.file;\n      } else {\n        console.log(\"Old browser. No support for Filereader API\");\n        this.formGroup.image = null;\n      }\n    },\n    selectedColor(color) {\n      this.formGroup.color = color;\n      this.isColor = false;\n    },\n    submitForm() {\n      switch (this.getTypeModal) {\n        case this.listType.TYPE_CATEGORY:\n          this.somethingApi(\"postCategories\", {\n            description: this.formGroup.description,\n            name: this.formGroup.name,\n            color: this.formGroup.color,\n          });\n          break;\n        case this.listType.TYPE_SUB_CATEGORY:\n          this.somethingApi(\n            \"postListSubCategories\",\n            {\n              description: this.formGroup.description,\n              name: this.formGroup.name,\n              multipartFile: this.getValueImage,\n            },\n            { categoryId: this.getIdClone }\n          );\n          break;\n        case this.listType.TYPE_SUB_DETAIL_CATEGORY:\n          this.somethingApi(\n            \"postDetailSubCategories\",\n            {\n              description: this.formGroup.description,\n              name: this.formGroup.name,\n              multipartFile: this.getValueImage,\n            },\n            { subCategoryId: this.getIdClone }\n          );\n          break;\n        case this.listType.TYPE_EDIT_CATEGORY:\n          this.somethingApi(\n            \"putCategories\",\n            {\n              description: this.formGroup.description,\n              name: this.formGroup.name,\n              color: this.formGroup.color,\n            },\n            { id: this.getIdClone }\n          );\n          break;\n        case this.listType.TYPE_EDIT_SUB_CATEGORY:\n          this.somethingApi(\n            \"putListSubCategories\",\n            {\n              description: this.formGroup.description,\n              name: this.formGroup.name,\n              multipartFile: this.getValueImage,\n            },\n            { categoryId: this.paramsRouter, id: this.getIdClone }\n          );\n          break;\n        case this.listType.TYPE_EDIT_SUB_DETAIL_CATEGORY:\n          this.somethingApi(\n            \"putDetailSubCategories\",\n            {\n              description: this.formGroup.description,\n              name: this.formGroup.name,\n              multipartFile: this.getValueImage,\n            },\n            {\n              subCategoryId: this.formGroup.subCategoryId,\n              detailSubCategoryId: this.getIdClone,\n            }\n          );\n          break;\n      }\n    },\n    actionCloseModal() {\n      this.closeModal();\n    },\n    async somethingApi(mappingApi, payload, params = null) {\n      var isPutApi = false;\n      const formData = new FormData();\n\n      if (payload.multipartFile) {\n        isPutApi = true;\n        for (const key in payload) {\n          formData.append(key, payload[key]);\n        }\n      }\n      console.log(formData);\n      const payloadApi = isPutApi\n        ? { formData, ...params }\n        : { ...payload, ...params };\n      try {\n        const res = await api(mappingApi, payloadApi);\n        if (!res.success) {\n          throw new Error(\"An error occurred.\");\n        }\n        this.$notify({\n          group: \"foo\",\n          title: \"Success\",\n          text: `Successfully update`,\n          type: \"success\",\n        });\n        this.actionCloseModal();\n        this.toggleCallApi();\n      } catch (err) {\n        this.$notify({\n          group: \"foo\",\n          title: \"error\",\n          text: `${err.message}`,\n          type: \"error\",\n        });\n      }\n    },\n    bindingFormGroup() {\n      this.formGroup = Object.assign(this.formGroup, this.getContentClone);\n    },\n  },\n  computed: {\n    ...mapGetters(\"management\", [\n      \"getTypeModal\",\n      \"getIdClone\",\n      \"getContentClone\",\n    ]),\n    hasFileInput() {\n      return (\n        this.getTypeModal === this.listType.TYPE_SUB_CATEGORY ||\n        this.getTypeModal === this.listType.TYPE_EDIT_SUB_CATEGORY ||\n        this.getTypeModal === this.listType.TYPE_SUB_DETAIL_CATEGORY ||\n        this.getTypeModal === this.listType.TYPE_EDIT_SUB_DETAIL_CATEGORY\n      );\n    },\n    getValueImage() {\n      var typeImage = typeof this.formGroup.image;\n      return !this.formGroup.image || typeImage === \"string\"\n        ? new File([\"\"], this.formGroup.image, { type: \"image/png\" })\n        : this.formGroup.image;\n    },\n    getOpacityImage() {\n      return {\n        opacity:\n          !this.formGroup.image || typeof this.formGroup.image === \"object\"\n            ? \"1\"\n            : \"0\",\n      };\n    },\n    getShowImagePreview() {\n      var pattern = new RegExp(\n        \"^(https?:\\\\/\\\\/)?\" +\n          \"((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|\" +\n          \"((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))\" +\n          \"(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*\" +\n          \"(\\\\?[;&a-z\\\\d%_.~+=-]*)?\" +\n          \"(\\\\#[-a-z\\\\d_]*)?$\",\n        \"i\"\n      );\n      return !!pattern.test(this.formGroup.image);\n    },\n  },\n  created() {\n    this.bindingFormGroup();\n  },\n  watch: {\n    $route: function (to, _) {\n      this.paramsRouter = to.params.id;\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.error {\n  border-color: #ed5d5d;\n  border-width: 2px;\n  background-color: rgba($color: #ed5d5d, $alpha: 0.08);\n  @apply rounded-md;\n}\n.error::placeholder {\n  color: #ed5d5d;\n}\n.text-error {\n  color: #ed5d5d;\n  @apply h-5 w-full ml-8 mt-2;\n}\n.errorDate {\n  background-color: #ed5d5d;\n}\n.error:focus {\n  outline: none;\n  border-color: #ed5d5d im !important;\n  border-width: 2px;\n  outline-offset: none !important;\n  box-shadow: none !important;\n}\n\n.title-form {\n  @apply font-bold text-xl ml-8 mr-12 pb-2 border-b-2 border-primary-1 mb-4;\n}\n.container-color {\n  background-color: white;\n  border: 1px solid gray;\n  bottom: -231%;\n  right: -30%;\n  @apply absolute rounded-lg;\n}\n.color-container {\n  width: 10vw;\n  height: 22vh;\n  @apply rounded-xl flex flex-wrap justify-around;\n}\n.box-upload {\n  border: 1px solid rgba($color: #2c3e50, $alpha: 0.6);\n  border-radius: 5px;\n}\n.overlay {\n  position: fixed;\n  right: 0;\n  top: 0%;\n  width: 120vw;\n  height: 120vh;\n  background-color: rgba($color: #000, $alpha: 0.4);\n  z-index: 99;\n}\n.box-modal {\n  width: 25vw;\n  background-color: white;\n  position: fixed;\n  z-index: 99999999999;\n  top: 14%;\n  left: 37%;\n  @apply rounded-xl flex-col flex;\n}\n.box-color {\n  @apply w-16 h-6 cursor-pointer rounded-md;\n}\n\n.text-invalid {\n  @apply h-6 flex justify-center text-error w-full ml-8 mt-2;\n}\n\n.btn-submit {\n  @apply mx-8 mt-4 mb-8 w-full;\n}\n\n.exit-icon {\n  @apply m-1 cursor-pointer hover:text-black;\n}\n\n.image-preview-form {\n  width: 12.5rem;\n  height: 12.5rem;\n  max-width: 12.5rem;\n  max-height: 12.5rem;\n  position: absolute;\n  left: 50%;\n  transform: translate(-50%, 0);\n}\n</style>\n<style>\n.preview-container {\n  width: 12.5rem !important;\n  height: 12.5rem !important;\n  max-width: 12.5rem !important;\n  max-height: 12.5rem !important;\n}\n.picture-preview {\n  width: 12.5rem !important;\n  height: 12.5rem !important;\n}\n.picture-inner {\n  top: -12.5rem !important;\n}\n</style>\n"]}]}