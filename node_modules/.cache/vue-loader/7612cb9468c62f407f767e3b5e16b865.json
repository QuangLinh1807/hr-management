{"remainingRequest":"/home/dlinh/Documents/hr-management/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dlinh/Documents/hr-management/src/components/CardProfile/DegreesAndCertificates.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dlinh/Documents/hr-management/src/components/CardProfile/DegreesAndCertificates.vue","mtime":1623985316464},{"path":"/home/dlinh/Documents/hr-management/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dlinh/Documents/hr-management/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/dlinh/Documents/hr-management/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dlinh/Documents/hr-management/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBEYXRlUGlja2VyIGZyb20gInZ1ZTItZGF0ZXBpY2tlciI7CmltcG9ydCBhcGkgZnJvbSAiQC9hcGkvYXBpIjsKaW1wb3J0IHsgbWFwR2V0dGVycywgbWFwTXV0YXRpb25zLCBtYXBBY3Rpb25zIH0gZnJvbSAidnVleCI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBEYXRlUGlja2VyLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzRWRpdFRhYmxlOiB0cnVlLAogICAgICBsaXN0RGVyZ2Vlc0Zyb21BcGk6IFtdLAogICAgICBsaXN0RGVncmVlczogW10sCiAgICAgIGRhdGE6IG51bGwsCiAgICAgIGFjY0lkOiBudWxsLAogICAgfTsKICB9LAogIGFzeW5jIGNyZWF0ZWQoKSB7CiAgICAvLyBhd2FpdCB0aGlzLmdldENlcnRpZmljYXRlQXBpKCk7CiAgICB0aGlzLmJpbmRpbmdsaXN0RGVncmVlcygpOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoImNlcnRpZmljYXRlIiwgWyJyZW5kZXJMaXN0RmllbGQiXSksCiAgfSwKICB3YXRjaDogewogICAgcmVuZGVyTGlzdEZpZWxkOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICB0aGlzLmJpbmRpbmdsaXN0RGVncmVlcygpOwogICAgICB9LAogICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICB9LAogICAgJHJvdXRlOiB7CiAgICAgIGhhbmRsZXI6IGFzeW5jIGZ1bmN0aW9uICh0bykgewogICAgICAgIHRoaXMuYWNjSWQgPSB0by5wYXJhbXMuaWQ7CiAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImNlcnRpZmljYXRlL2dldENlcnRpZmljYXRlQXBpIiwgewogICAgICAgICAgYWNjb3VudElkOiB0by5wYXJhbXMuaWQsCiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBNdXRhdGlvbnMoImxvYWRpbmciLCBbIlNFVF9MT0FESU5HIl0pLAogICAgLi4ubWFwTXV0YXRpb25zKCJjZXJ0aWZpY2F0ZSIsIFsiU0VUX0lTX1NIT1dfQUREIl0pLAogICAgLi4ubWFwTXV0YXRpb25zKCJwb3B1cERlbGV0ZSIsIFsKICAgICAgIlNFVF9USVRMRSIsCiAgICAgICJTRVRfTkFNRV9ERVRBSUwiLAogICAgICAiU0VUX0lTX1NIT1ciLAogICAgICAiU0VUX0NBU0VfREVMRVRFIiwKICAgICAgIlNFVF9BQ0NPVU5UX0lEIiwKICAgIF0pLAogICAgb3BlbkRlbGV0ZShjZXJJZCwgdGl0bGUpIHsKICAgICAgdGhpcy5TRVRfVElUTEUoIkRlZ3JlZXMgYW5kIENlcnRpZmljYXRlcyIpOwogICAgICB0aGlzLlNFVF9OQU1FX0RFVEFJTCh0aXRsZSk7CiAgICAgIHRoaXMuU0VUX0lTX1NIT1coY2VySWQpOwogICAgICB0aGlzLlNFVF9DQVNFX0RFTEVURSg4KTsKICAgICAgdGhpcy5TRVRfQUNDT1VOVF9JRCh0aGlzLmFjY0lkKTsKICAgIH0sCiAgICB0b2dnbGVEaXNhYmxlKCkgewogICAgICB0aGlzLmlzRWRpdFRhYmxlID0gZmFsc2U7CiAgICB9LAogICAgYXN5bmMgc2F2ZUluZm8oKSB7CiAgICAgIGF3YWl0IHRoaXMucHV0Q2VydGlmaWNhdGVBcGkoKTsKICAgIH0sCiAgICBjbG9zZVNhdmUoKSB7CiAgICAgIHRoaXMuaXNFZGl0VGFibGUgPSB0cnVlOwogICAgICB0aGlzLmJpbmRpbmdsaXN0RGVncmVlcygpOwogICAgfSwKICAgIGJpbmRpbmdsaXN0RGVncmVlcygpIHsKICAgICAgdGhpcy5saXN0RGVncmVlcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5yZW5kZXJMaXN0RmllbGQpKTsKICAgIH0sCiAgICBvcGVuQWRkQ2VydGlmaWNhdGUoKSB7CiAgICAgIHRoaXMuU0VUX0lTX1NIT1dfQUREKHRydWUpOwogICAgfSwKICAgIHNjcm9sbFRvRW5kKCkgewogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgbGV0IGNvbnRhaW5lciA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoIiNjb250YWluZXIiKTsKICAgICAgICBjb250YWluZXIuc2Nyb2xsVG9wID0gY29udGFpbmVyLnNjcm9sbEhlaWdodDsKICAgICAgfSk7CiAgICB9LAogICAgYXN5bmMgcHV0Q2VydGlmaWNhdGVBcGkoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy5TRVRfTE9BRElORyh0cnVlKTsKICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0gdGhpcy5saXN0RGVncmVlcy5tYXAoKGl0ZW0pID0+IHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGNlcnRpZmljYXRlSWQ6IGl0ZW0uaWQsCiAgICAgICAgICAgIG5hbWU6IGl0ZW0udGl0bGUsCiAgICAgICAgICAgIHN0YXJ0RGF0ZTogYDAxLzAxLyR7aXRlbS5kYXRlWzBdfWAsCiAgICAgICAgICAgIGVuZERhdGU6IGAwMS8wMS8ke2l0ZW0uZGF0ZVsxXX1gLAogICAgICAgICAgfTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLlNFVF9MT0FESU5HKGZhbHNlKTsKICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkoInB1dENlcnRpZmljYXRlQXBpIiwgewogICAgICAgICAgZGF0YTogdXBkYXRlRGF0YSwKICAgICAgICAgIGFjY291bnRJZDogdGhpcy5hY2NJZCwKICAgICAgICB9KTsKCiAgICAgICAgaWYgKCFyZXMuc3VjY2VzcykgewogICAgICAgICAgdGhpcy5pc0VkaXRUYWJsZSA9IGZhbHNlOwogICAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKHJlcy5kYXRhLnJlc3BvbnNlLmRhdGEubWVzc2FnZSk7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzLmRhdGEucmVzcG9uc2UuZGF0YS5lcnJvcnNbMF0ubWVzc2FnZSk7CiAgICAgICAgfQogICAgICAgIHRoaXMuU0VUX0xPQURJTkcoZmFsc2UpOwogICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJjZXJ0aWZpY2F0ZS9nZXRDZXJ0aWZpY2F0ZUFwaSIsIHsKICAgICAgICAgIGFjY291bnRJZDogdGhpcy5hY2NJZCwKICAgICAgICB9KTsKICAgICAgICB0aGlzLmlzRWRpdFRhYmxlID0gdHJ1ZTsKICAgICAgICB0aGlzLmJpbmRpbmdsaXN0RGVncmVlcygpOwogICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICBncm91cDogImZvbyIsCiAgICAgICAgICB0aXRsZTogInN1Y2Nlc3MiLAogICAgICAgICAgdGV4dDogIlN1Y2Nlc3NmdWxseSBzYXZlIENlcnRpZmljYXRlIiwKICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICB9KTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgZ3JvdXA6ICJlcnIiLAogICAgICAgICAgdGl0bGU6ICJFcnJvciIsCiAgICAgICAgICB0ZXh0OiBlcnJvci5tZXNzYWdlLAogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["DegreesAndCertificates.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DegreesAndCertificates.vue","sourceRoot":"src/components/CardProfile","sourcesContent":["<template>\n  <div class=\"card-degree\">\n    <ValidationObserver v-slot=\"{ handleSubmit }\">\n      <form @submit.prevent=\"handleSubmit(saveInfo)\">\n        <div class=\"form-certificate intro-y\">\n          <div class=\"form-header\">\n            <h2 class=\"text-lg mr-auto font-bold\">Degrees And Certificates</h2>\n            <div class=\"ml-auto flex\">\n              <button\n                v-if=\"!isEditTable\"\n                class=\"focus:outline-none\"\n                type=\"submit\"\n              >\n                <SaveIcon class=\"btn-save\" />\n              </button>\n              <button\n                v-if=\"!isEditTable\"\n                class=\"focus:outline-none\"\n                @click=\"closeSave\"\n              >\n                <XIcon class=\"btn-close\" />\n              </button>\n              <button\n                v-if=\"isEditTable\"\n                @click.prevent=\"toggleDisable\"\n                class=\"focus:outline-none\"\n              >\n                <EditIcon class=\"btn-edit\" />\n              </button>\n            </div>\n          </div>\n          <PerfectScrollbar class=\"form-body\" id=\"container\">\n            <div\n              v-if=\"listDegrees.length === 0\"\n              class=\"text-center opacity-60 mt-16\"\n            >\n              <img\n                alt=\"Icewall Tailwind HTML Admin Template\"\n                class=\"h-40 m-auto mb-4\"\n                :src=\"require(`@/assets/images/error-illustration.svg`)\"\n              />No information yet, please add a new one\n            </div>\n            <div\n              class=\"flex sm:flex-row it-cer\"\n              v-for=\"(item, index) of listDegrees\"\n              :key=\"index\"\n            >\n              <div v-if=\"!isEditTable\" class=\"withdInput\">\n                <ValidationProvider\n                  rules=\"required|min:1|max:255\"\n                  v-slot=\"{ errors, classes }\"\n                  name=\"title\"\n                >\n                  <input\n                    v-if=\"!isEditTable\"\n                    class=\"field-input inputTitle form-control\"\n                    v-model.trim=\"item.title\"\n                    placeholder=\"Title\"\n                    name=\"title\"\n                    :class=\"{ error: errors[0] }\"\n                  />\n                  <div\n                    v-if=\"!isEditTable\"\n                    class=\"text-red-600 mt-1\"\n                    :class=\"classes\"\n                  >\n                    {{ errors[0] }}\n                  </div>\n                </ValidationProvider>\n              </div>\n              <ValidationProvider\n                rules=\"required\"\n                v-slot=\"{ errors, classes, failedRules }\"\n                name=\"date\"\n              >\n                <DatePicker\n                  class=\"\n                    field-date\n                    dateCertificate\n                    dateEducation\n                    text-center\n                    mx-2\n                  \"\n                  v-if=\"!isEditTable\"\n                  name=\"date\"\n                  format=\"YYYY\"\n                  value-type=\"YYYY\"\n                  v-model=\"item.date\"\n                  lang=\"en\"\n                  type=\"year\"\n                  range\n                  :clearable=\"false\"\n                  :class=\"{ error: errors[0] }\"\n                ></DatePicker>\n                <div\n                  v-if=\"!isEditTable\"\n                  class=\"text-red-600 ml-4 mt-1\"\n                  :class=\"classes\"\n                >\n                  {{ failedRules.required ? \"The year field is required\" : \"\" }}\n                </div>\n              </ValidationProvider>\n              <button\n                v-if=\"!isEditTable\"\n                class=\"btn-popup-delete rm-cer\"\n                @click.prevent=\"openDelete(item.id, item.title)\"\n              >\n                <XIcon class=\"icon-popup-delete\" />\n              </button>\n              <div v-if=\"isEditTable\" class=\"show-body\">\n                <div class=\"w-3/4\">\n                  <div class=\"show-body-title\">\n                    {{ item.title }}\n                  </div>\n                </div>\n                <div class=\"show-body-date\">\n                  {{ `${item.date[0]} - ${item.date[1]}` }}\n                </div>\n              </div>\n            </div>\n          </PerfectScrollbar>\n          <button\n            class=\"flex items-center mb-4 mt-2 ml-8 hover:text-primary-1\"\n            aria-expanded=\"false\"\n            type=\"button\"\n            @click=\"openAddCertificate\"\n          >\n            <Plus-SquareIcon class=\"w-5 h-5 mr-2\" />\n            <span class=\"font-medium text-base\">Add more</span>\n          </button>\n        </div>\n      </form>\n    </ValidationObserver>\n  </div>\n</template>\n<script>\nimport DatePicker from \"vue2-datepicker\";\nimport api from \"@/api/api\";\nimport { mapGetters, mapMutations, mapActions } from \"vuex\";\nexport default {\n  components: {\n    DatePicker,\n  },\n  data() {\n    return {\n      isEditTable: true,\n      listDergeesFromApi: [],\n      listDegrees: [],\n      data: null,\n      accId: null,\n    };\n  },\n  async created() {\n    // await this.getCertificateApi();\n    this.bindinglistDegrees();\n  },\n  computed: {\n    ...mapGetters(\"certificate\", [\"renderListField\"]),\n  },\n  watch: {\n    renderListField: {\n      handler: function (val) {\n        this.bindinglistDegrees();\n      },\n      immediate: true,\n    },\n    $route: {\n      handler: async function (to) {\n        this.accId = to.params.id;\n        await this.$store.dispatch(\"certificate/getCertificateApi\", {\n          accountId: to.params.id,\n        });\n      },\n      immediate: true,\n    },\n  },\n  methods: {\n    ...mapMutations(\"loading\", [\"SET_LOADING\"]),\n    ...mapMutations(\"certificate\", [\"SET_IS_SHOW_ADD\"]),\n    ...mapMutations(\"popupDelete\", [\n      \"SET_TITLE\",\n      \"SET_NAME_DETAIL\",\n      \"SET_IS_SHOW\",\n      \"SET_CASE_DELETE\",\n      \"SET_ACCOUNT_ID\",\n    ]),\n    openDelete(cerId, title) {\n      this.SET_TITLE(\"Degrees and Certificates\");\n      this.SET_NAME_DETAIL(title);\n      this.SET_IS_SHOW(cerId);\n      this.SET_CASE_DELETE(8);\n      this.SET_ACCOUNT_ID(this.accId);\n    },\n    toggleDisable() {\n      this.isEditTable = false;\n    },\n    async saveInfo() {\n      await this.putCertificateApi();\n    },\n    closeSave() {\n      this.isEditTable = true;\n      this.bindinglistDegrees();\n    },\n    bindinglistDegrees() {\n      this.listDegrees = JSON.parse(JSON.stringify(this.renderListField));\n    },\n    openAddCertificate() {\n      this.SET_IS_SHOW_ADD(true);\n    },\n    scrollToEnd() {\n      this.$nextTick(() => {\n        let container = this.$el.querySelector(\"#container\");\n        container.scrollTop = container.scrollHeight;\n      });\n    },\n    async putCertificateApi() {\n      try {\n        this.SET_LOADING(true);\n        const updateData = this.listDegrees.map((item) => {\n          return {\n            certificateId: item.id,\n            name: item.title,\n            startDate: `01/01/${item.date[0]}`,\n            endDate: `01/01/${item.date[1]}`,\n          };\n        });\n        this.SET_LOADING(false);\n        const res = await api(\"putCertificateApi\", {\n          data: updateData,\n          accountId: this.accId,\n        });\n\n        if (!res.success) {\n          this.isEditTable = false;\n          // throw new Error(res.data.response.data.message);\n          throw new Error(res.data.response.data.errors[0].message);\n        }\n        this.SET_LOADING(false);\n        await this.$store.dispatch(\"certificate/getCertificateApi\", {\n          accountId: this.accId,\n        });\n        this.isEditTable = true;\n        this.bindinglistDegrees();\n        this.$notify({\n          group: \"foo\",\n          title: \"success\",\n          text: \"Successfully save Certificate\",\n          type: \"success\",\n        });\n      } catch (error) {\n        this.$notify({\n          group: \"err\",\n          title: \"Error\",\n          text: error.message,\n          type: \"error\",\n        });\n      }\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.card-degree {\n  // border: 1px solid #cecece;\n  background-color: #f2f8fc;\n  @apply max-w-2xl rounded overflow-hidden w-1/2;\n}\n.dateEducation {\n  width: calc(100% - 10px) !important;\n}\n.dateCertificate {\n  // width: calc(100% - 10px) !important;\n  width: 80% !important;\n  margin-left: 1.2rem;\n  float: right;\n  margin-bottom: 5px;\n}\n\n.form-certificate {\n  @apply col-span-12 lg:col-span-6 pb-3;\n  .form-header {\n    @apply flex items-center p-1 pl-3 border-b border-white dark:border-dark-5 mb-3;\n\n    .btn-save {\n      @apply text-blue-900 focus:outline-none;\n    }\n    .btn-close {\n      @apply text-gray-600 focus:outline-none;\n    }\n    .btn-edit {\n      @apply hover:text-primary-1;\n    }\n  }\n  .form-body {\n    @apply p-2 h-80;\n\n    .withdInput {\n      @apply mr-auto pl-6 w-2/3 focus:outline-none mb-6;\n\n      .field-input {\n        @apply w-11/12 font-normal text-base  focus:outline-none px-2;\n      }\n      .btn-delete {\n        @apply focus:outline-none h-10 mr-2;\n      }\n    }\n    .field-date {\n      @apply text-center mx-2;\n    }\n    .btn-popup-delete {\n      @apply focus:outline-none h-10 mr-1;\n\n      .icon-popup-delete {\n        @apply text-gray-600 focus:outline-none;\n      }\n    }\n    .show-body {\n      @apply flex w-full justify-between mb-4;\n\n      .show-body-title {\n        @apply mr-auto pl-6 break-words text-lg font-medium;\n      }\n      .show-body-date {\n        @apply text-center mr-5 font-medium text-base;\n        margin-top: 3px;\n      }\n      // .btn-popup-add {\n      //   @apply;\n      // }\n    }\n  }\n}\n</style>\n<style lang=\"scss\">\n.mx-input-wrapper input {\n  height: 46px;\n  border: 1px solid #cccccc75;\n}\n.tit-degree {\n  border-bottom: 1px solid #fff;\n  @apply flex items-center p-2 pl-6 mb-4;\n}\n.scroll-education {\n  height: 300px;\n  input {\n    transform: none !important;\n    opacity: 1 !important;\n    height: 46px !important;\n    border-radius: 8px !important;\n    margin-top: 0 !important;\n    border: 1px solid #cccccc75;\n  }\n}\n.dateCertificate.error .mx-input {\n  background-color: #f652523b;\n  border-color: #ff000033;\n}\n.scroll-education input.error {\n  background-color: #f652523b;\n  border-color: #ff000033;\n}\n.inputTitle {\n  height: 40px;\n}\n</style>\n<style lang=\"scss\" scoped>\n.error::placeholder {\n  color: #ed5d5d;\n}\n</style>\n"]}]}