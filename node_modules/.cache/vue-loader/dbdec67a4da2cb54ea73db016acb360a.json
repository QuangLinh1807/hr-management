{"remainingRequest":"/home/dlinh/Documents/hr-management/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dlinh/Documents/hr-management/src/components/Timeline/PopupAddTimeline.vue?vue&type=style&index=0&id=03e785e4&lang=scss&scoped=true&","dependencies":[{"path":"/home/dlinh/Documents/hr-management/src/components/Timeline/PopupAddTimeline.vue","mtime":1623749289480},{"path":"/home/dlinh/Documents/hr-management/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dlinh/Documents/hr-management/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/dlinh/Documents/hr-management/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/dlinh/Documents/hr-management/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dlinh/Documents/hr-management/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dlinh/Documents/hr-management/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpidXR0b24gewogIGFwcGVhcmFuY2U6IG5vbmU7CiAgb3V0bGluZTogbm9uZTsKICBib3JkZXI6IG5vbmU7Cn0KLm1vZGFsLW92ZXJsYXkgewogIHRvcDogMDsKICBib3R0b206IDA7CiAgbGVmdDogMDsKICByaWdodDogMDsKICB6LWluZGV4OiAyMjsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMyk7Cn0KLmRldGFpbC1wb3B1cC10aW1lbGluZSB7CiAgei1pbmRleDogMjAwOwogIHRvcDogMzAlOwogIGxlZnQ6IDUwJTsKICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtMzAlKTsKICB3aWR0aDogMTAwJTsKICBtYXgtd2lkdGg6IDYwMHB4Owp9Ci5mYWRlSW4tZW50ZXItYWN0aXZlLAouZmFkZUluLWxlYXZlLWFjdGl2ZSB7CiAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjVzOwp9Ci5mYWRlSW4tZW50ZXIsCi5mYWRlSW4tbGVhdmUtdG8gewogIG9wYWNpdHk6IDA7Cn0KLnNsaWRlLWVudGVyLWFjdGl2ZSwKLnNsaWRlLWxlYXZlLWFjdGl2ZSB7CiAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjVzOwp9Ci5zbGlkZS1lbnRlciwKLnNsaWRlLWxlYXZlLXRvIHsKICBvcGFjaXR5OiAwOwp9Ci5pdGVtLXRpbWVsaW5lIGxhYmVsIHsKICB3aWR0aDogNzBweDsKICBmbG9hdDogbGVmdDsKfQouaXRlbS10aW1lbGluZTpsYXN0LWNoaWxkIHsKICBtYXJnaW4tYm90dG9tOiAwOwp9Ci5idG4tYWRkIHsKICBAYXBwbHkgYmctYmx1ZS02MDAgdGV4dC13aGl0ZSBweC0xMCBweS0zIHJvdW5kZWQtbGcgZm9udC1zZW1pYm9sZCBteC1hdXRvOwogIHRyYW5zaXRpb246IDAuMXMgbGluZWFyOwp9Ci5idG4tY2xvc2UgewogIEBhcHBseSBweC0xMCBweS0zIHJvdW5kZWQtbGcgZm9udC1zZW1pYm9sZCBteC1hdXRvICBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1vZmZzZXQtMiBmb2N1czpyaW5nLWluZGlnby01MDA7CiAgYm9yZGVyOiAxcHggc29saWQgI2UyZThmMDsKfQouYnRuLWFkZDpob3ZlciB7CiAgb3BhY2l0eTogMC44Owp9Ci5mb3JtLXRpbWVsaW5lLWFyZWEgewogIG1heC1oZWlnaHQ6IDYwMHB4OwogIHdpZHRoOiAxMDAlOwogIHBhZGRpbmc6IDAgMTZweDsKfQoudmFsaS1kYXRlLXRpbWVsaW5lIHsKICB3aWR0aDogY2FsYygxMDAlIC0gNzBweCk7CiAgLm1vbnRoLWlucHV0IHsKICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7CiAgfQp9Ci5mYWlsZWQtcnVsZXMgewogIGNvbG9yOiAjZWQ1ZDVkOwp9Ci5teC1kYXRlcGlja2VyLXJhbmdlIHsKICB3aWR0aDogMTAwJTsKfQo="},{"version":3,"sources":["PopupAddTimeline.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PopupAddTimeline.vue","sourceRoot":"src/components/Timeline","sourcesContent":["<template>\n  <div>\n    <transition name=\"fadeIn\" appear>\n      <div\n        class=\"modal-overlay fixed\"\n        v-if=\"showAddTimeline\"\n        @click=\"closeTimeline()\"\n      ></div>\n    </transition>\n    <transition name=\"slide\" appear>\n      <div\n        class=\"detail-popup-timeline fixed bg-white rounded-lg p-8\"\n        v-if=\"showAddTimeline\"\n      >\n        <button class=\"absolute top-2 right-2\" @click=\"closeTimeline()\">\n          <xIcon />\n        </button>\n        <div class=\"title text-center text-base font-semibold mb-6\">\n          {{ addTimeline }}\n        </div>\n        <hr />\n        <ValidationObserver v-slot=\"{ handleSubmit }\">\n          <form @submit.prevent=\"handleSubmit(submitForm)\">\n            <PerfectScrollbar\n              class=\"form-timeline-area relative\"\n              id=\"container\"\n            >\n              <div\n                class=\"item-timeline my-4\"\n                v-for=\"(item, index) of listTimeline\"\n                :key=\"index\"\n              >\n                <button\n                  class=\"flex items-center mb-3 w-full justify-end\"\n                  @click.prevent=\"removeTimeline(index)\"\n                  v-show=\"index || (!index && listTimeline.length > 1)\"\n                >\n                  <xIcon class=\"w-5 h-5\" />\n                </button>\n                <div class=\"item-timeline flex\">\n                  <label class=\"mt-3\">Period:</label>\n                  <ValidationProvider\n                    rules=\"required\"\n                    v-slot=\"{ errors, failedRules }\"\n                    class=\"vali-date-timeline\"\n                  >\n                    <DatePicker\n                      v-model=\"item.range\"\n                      lang=\"en\"\n                      range\n                      type=\"month\"\n                      format=\"M/YYYY\"\n                      :disabled-date=\"disabledBeforeToday\"\n                      class=\"month-input mb-1\"\n                      :class=\"{ error: errors[0] }\"\n                    >\n                    </DatePicker>\n                    <div class=\"failed-rules h-3 mb-2\">\n                      {{\n                        failedRules.required ? \"The time field is required\" : \"\"\n                      }}\n                    </div>\n                  </ValidationProvider>\n                </div>\n                <div class=\"item-timeline mb-2 flex\">\n                  <label class=\"mt-3\">Title:</label>\n                  <BaseInput :inputField=\"fieldTitle\" v-model=\"item.title\" />\n                </div>\n                <div class=\"item-timeline w-full flex mb-2\">\n                  <label class=\"\">Content:</label>\n                  <BaseTextarea\n                    :textareaField=\"fieldContent\"\n                    v-model=\"item.content\"\n                  ></BaseTextarea>\n                </div>\n                <hr />\n              </div>\n            </PerfectScrollbar>\n            <button\n              class=\"flex items-center mb-4 mt-2\"\n              @click.prevent=\"addMoreTimeline()\"\n            >\n              <Plus-SquareIcon class=\"w-5 h-5 mr-2\"></Plus-SquareIcon>Add more\n              Timeline\n            </button>\n            <div class=\"flex justify-center\">\n              <div class=\"w-2/4 flex justify-between\">\n                <button type=\"submit\" class=\"btn-add\">Save</button>\n                <button @click=\"closeTimeline()\" class=\"btn-close\">\n                  Cancel\n                </button>\n              </div>\n            </div>\n          </form>\n        </ValidationObserver>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport BaseInput from \"../../components/BaseInput/BaseInput.vue\";\nimport BaseTextarea from \"../../components/BaseTextarea/BaseTextarea.vue\";\nimport DatePicker from \"vue2-datepicker\";\nimport { PerfectScrollbar } from \"vue2-perfect-scrollbar\";\nimport { mapGetters, mapMutations } from \"vuex\";\nimport api from \"../../api/api\";\nimport moment from \"moment\";\n\nexport default {\n  components: {\n    DatePicker,\n    BaseInput,\n    BaseTextarea,\n    PerfectScrollbar,\n  },\n  name: \"PopupTimeline\",\n  computed: {\n    ...mapGetters(\"popupAddTimeline\", [\"showAddTimeline\", \"accountId\"]),\n  },\n  data() {\n    return {\n      range: new Date(),\n      showPopupTimeline: false,\n      submitted: false,\n      addTimeline: \"Add Timeline\",\n      listTimelineFromApi: [\n        {\n          range: \"\",\n          title: \"\",\n          content: \"\",\n        },\n      ],\n      listTimeline: [],\n      fidldDate: {\n        name: \"datepicker\",\n        rules: \"required\",\n      },\n      fieldTitle: {\n        name: \"title\",\n        model: \"\",\n        rules: \"required|min:4|max:50\",\n        type: \"text\",\n      },\n      fieldContent: {\n        name: \"content\",\n        model: \"\",\n        rules: \"required|min:4|max:512\",\n      },\n    };\n  },\n  props: {\n    addTimelines: {\n      type: Function,\n      default: () => 1,\n    },\n  },\n  created() {\n    this.bindinglistTimeline();\n  },\n  methods: {\n    ...mapMutations(\"popupAddTimeline\", [\"SET_SHOW_ADD_TIMELINE\"]),\n    ...mapMutations(\"loading\", [\"SET_LOADING\"]),\n    disabledBeforeToday(date) {\n      return date > new Date();\n    },\n    addMoreTimeline() {\n      if (this.listTimeline.length < 5) {\n        this.listTimeline.push({\n          range: \"\",\n          title: \"\",\n          content: \"\",\n        });\n        this.scrollToEnd();\n      } else {\n        this.$notify({\n          group: \"foo\",\n          title: \"Error\",\n          text: \"Cannot Add Timeline, you have enough 5 items\",\n          type: \"error\",\n        });\n      }\n    },\n    removeTimeline(idtime) {\n      if (this.listTimeline.length > 1) {\n        this.listTimeline.splice(idtime, 1);\n      }\n    },\n    closeTimeline() {\n      this.SET_SHOW_ADD_TIMELINE(false);\n      this.listTimeline = JSON.parse(JSON.stringify(this.listTimelineFromApi));\n    },\n    scrollToEnd() {\n      this.$nextTick(() => {\n        var container = document.querySelector(\"#container\");\n        container.scrollTop = container.scrollHeight;\n      });\n    },\n    //format date\n    formatDateTime(date) {\n      return moment(date).format(\"DD/MM/YYYY\");\n    },\n    async submitForm() {\n      this.addTimelines(this.listTimeline);\n      let insertValues = [];\n      this.listTimeline.forEach((item) => {\n        insertValues.push({\n          content: item.content,\n          endDate: this.formatDateTime(item.range[1]),\n          startDate: this.formatDateTime(item.range[0]),\n          title: item.title,\n        });\n      });\n      const result = await api(\"addTimelineApi\", {\n        listTimelines: insertValues,\n        accountId: this.accountId,\n      });\n      if (result.success === true) {\n        this.SET_LOADING(false);\n        this.$store.commit(\"SET_FLAG_CHANGE\", true);\n\n        this.SET_SHOW_ADD_TIMELINE(false);\n        this.$notify({\n          group: \"foo\",\n          title: \"Success\",\n          text: \"Successfully added timeline\",\n          type: \"success\",\n        });\n      }\n      this.listTimeline = JSON.parse(JSON.stringify(this.listTimelineFromApi));\n    },\n    bindinglistTimeline() {\n      this.listTimeline = JSON.parse(JSON.stringify(this.listTimelineFromApi));\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\nbutton {\n  appearance: none;\n  outline: none;\n  border: none;\n}\n.modal-overlay {\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 22;\n  background-color: rgba(0, 0, 0, 0.3);\n}\n.detail-popup-timeline {\n  z-index: 200;\n  top: 30%;\n  left: 50%;\n  transform: translate(-50%, -30%);\n  width: 100%;\n  max-width: 600px;\n}\n.fadeIn-enter-active,\n.fadeIn-leave-active {\n  transition: opacity 0.5s;\n}\n.fadeIn-enter,\n.fadeIn-leave-to {\n  opacity: 0;\n}\n.slide-enter-active,\n.slide-leave-active {\n  transition: opacity 0.5s;\n}\n.slide-enter,\n.slide-leave-to {\n  opacity: 0;\n}\n.item-timeline label {\n  width: 70px;\n  float: left;\n}\n.item-timeline:last-child {\n  margin-bottom: 0;\n}\n.btn-add {\n  @apply bg-blue-600 text-white px-10 py-3 rounded-lg font-semibold mx-auto;\n  transition: 0.1s linear;\n}\n.btn-close {\n  @apply px-10 py-3 rounded-lg font-semibold mx-auto  focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500;\n  border: 1px solid #e2e8f0;\n}\n.btn-add:hover {\n  opacity: 0.8;\n}\n.form-timeline-area {\n  max-height: 600px;\n  width: 100%;\n  padding: 0 16px;\n}\n.vali-date-timeline {\n  width: calc(100% - 70px);\n  .month-input {\n    width: 100% !important;\n  }\n}\n.failed-rules {\n  color: #ed5d5d;\n}\n.mx-datepicker-range {\n  width: 100%;\n}\n</style>\n\n<style lang=\"scss\">\n.detail-popup-timeline {\n  input {\n    transform: none !important;\n  }\n}\n.month-input {\n  width: 100%;\n  .mx-input {\n    border: 1px solid #cccccc6b !important;\n    height: 46px !important;\n    border-radius: 8px !important;\n    padding-left: 20px;\n  }\n}\n.month-input.error .mx-input {\n  background-color: rgba(237, 93, 93, 0.08);\n  border-color: #ed5d5d !important;\n}\n*:focus {\n  outline: none !important;\n}\n</style>\n"]}]}